<!DOCTYPE html><html><head><meta charset="utf-8"><title>API Overview</title><link rel="stylesheet" href="https://maxcdn.bootstrapcdn.com/font-awesome/4.3.0/css/font-awesome.min.css"><style>@import url('https://fonts.googleapis.com/css?family=Roboto:400,700|Inconsolata|Raleway:200');.hljs-comment,.hljs-title{color:#8e908c}.hljs-variable,.hljs-attribute,.hljs-tag,.hljs-regexp,.ruby .hljs-constant,.xml .hljs-tag .hljs-title,.xml .hljs-pi,.xml .hljs-doctype,.html .hljs-doctype,.css .hljs-id,.css .hljs-class,.css .hljs-pseudo{color:#c82829}.hljs-number,.hljs-preprocessor,.hljs-pragma,.hljs-built_in,.hljs-literal,.hljs-params,.hljs-constant{color:#f5871f}.ruby .hljs-class .hljs-title,.css .hljs-rules .hljs-attribute{color:#eab700}.hljs-string,.hljs-value,.hljs-inheritance,.hljs-header,.ruby .hljs-symbol,.xml .hljs-cdata{color:#718c00}.css .hljs-hexcolor{color:#3e999f}.hljs-function,.python .hljs-decorator,.python .hljs-title,.ruby .hljs-function .hljs-title,.ruby .hljs-title .hljs-keyword,.perl .hljs-sub,.javascript .hljs-title,.coffeescript .hljs-title{color:#4271ae}.hljs-keyword,.javascript .hljs-function{color:#8959a8}.hljs{display:block;background:white;color:#4d4d4c;padding:.5em}.coffeescript .javascript,.javascript .xml,.tex .hljs-formula,.xml .javascript,.xml .vbscript,.xml .css,.xml .hljs-cdata{opacity:.5}.right .hljs-comment{color:#969896}.right .css .hljs-class,.right .css .hljs-id,.right .css .hljs-pseudo,.right .hljs-attribute,.right .hljs-regexp,.right .hljs-tag,.right .hljs-variable,.right .html .hljs-doctype,.right .ruby .hljs-constant,.right .xml .hljs-doctype,.right .xml .hljs-pi,.right .xml .hljs-tag .hljs-title{color:#c66}.right .hljs-built_in,.right .hljs-constant,.right .hljs-literal,.right .hljs-number,.right .hljs-params,.right .hljs-pragma,.right .hljs-preprocessor{color:#de935f}.right .css .hljs-rule .hljs-attribute,.right .ruby .hljs-class .hljs-title{color:#f0c674}.right .hljs-header,.right .hljs-inheritance,.right .hljs-name,.right .hljs-string,.right .hljs-value,.right .ruby .hljs-symbol,.right .xml .hljs-cdata{color:#b5bd68}.right .css .hljs-hexcolor,.right .hljs-title{color:#8abeb7}.right .coffeescript .hljs-title,.right .hljs-function,.right .javascript .hljs-title,.right .perl .hljs-sub,.right .python .hljs-decorator,.right .python .hljs-title,.right .ruby .hljs-function .hljs-title,.right .ruby .hljs-title .hljs-keyword{color:#81a2be}.right .hljs-keyword,.right .javascript .hljs-function{color:#b294bb}.right .hljs{display:block;overflow-x:auto;background:#1d1f21;color:#c5c8c6;padding:.5em;-webkit-text-size-adjust:none}.right .coffeescript .javascript,.right .javascript .xml,.right .tex .hljs-formula,.right .xml .css,.right .xml .hljs-cdata,.right .xml .javascript,.right .xml .vbscript{opacity:.5}.hljs-comment,.hljs-title{color:#8e908c}.hljs-variable,.hljs-attribute,.hljs-tag,.hljs-regexp,.ruby .hljs-constant,.xml .hljs-tag .hljs-title,.xml .hljs-pi,.xml .hljs-doctype,.html .hljs-doctype,.css .hljs-id,.css .hljs-class,.css .hljs-pseudo{color:#c82829}.hljs-number,.hljs-preprocessor,.hljs-pragma,.hljs-built_in,.hljs-literal,.hljs-params,.hljs-constant{color:#f5871f}.ruby .hljs-class .hljs-title,.css .hljs-rules .hljs-attribute{color:#eab700}.hljs-string,.hljs-value,.hljs-inheritance,.hljs-header,.ruby .hljs-symbol,.xml .hljs-cdata{color:#718c00}.css .hljs-hexcolor{color:#3e999f}.hljs-function,.python .hljs-decorator,.python .hljs-title,.ruby .hljs-function .hljs-title,.ruby .hljs-title .hljs-keyword,.perl .hljs-sub,.javascript .hljs-title,.coffeescript .hljs-title{color:#4271ae}.hljs-keyword,.javascript .hljs-function{color:#8959a8}.hljs{display:block;background:white;color:#4d4d4c;padding:.5em}.coffeescript .javascript,.javascript .xml,.tex .hljs-formula,.xml .javascript,.xml .vbscript,.xml .css,.xml .hljs-cdata{opacity:.5}.right .hljs-comment{color:#969896}.right .css .hljs-class,.right .css .hljs-id,.right .css .hljs-pseudo,.right .hljs-attribute,.right .hljs-regexp,.right .hljs-tag,.right .hljs-variable,.right .html .hljs-doctype,.right .ruby .hljs-constant,.right .xml .hljs-doctype,.right .xml .hljs-pi,.right .xml .hljs-tag .hljs-title{color:#c66}.right .hljs-built_in,.right .hljs-constant,.right .hljs-literal,.right .hljs-number,.right .hljs-params,.right .hljs-pragma,.right .hljs-preprocessor{color:#de935f}.right .css .hljs-rule .hljs-attribute,.right .ruby .hljs-class .hljs-title{color:#f0c674}.right .hljs-header,.right .hljs-inheritance,.right .hljs-name,.right .hljs-string,.right .hljs-value,.right .ruby .hljs-symbol,.right .xml .hljs-cdata{color:#b5bd68}.right .css .hljs-hexcolor,.right .hljs-title{color:#8abeb7}.right .coffeescript .hljs-title,.right .hljs-function,.right .javascript .hljs-title,.right .perl .hljs-sub,.right .python .hljs-decorator,.right .python .hljs-title,.right .ruby .hljs-function .hljs-title,.right .ruby .hljs-title .hljs-keyword{color:#81a2be}.right .hljs-keyword,.right .javascript .hljs-function{color:#b294bb}.right .hljs{display:block;overflow-x:auto;background:#1d1f21;color:#c5c8c6;padding:.5em;-webkit-text-size-adjust:none}.right .coffeescript .javascript,.right .javascript .xml,.right .tex .hljs-formula,.right .xml .css,.right .xml .hljs-cdata,.right .xml .javascript,.right .xml .vbscript{opacity:.5}body{color:rgba(0,0,0,0.8);background:white;font:400 1.05em / 1.6 "Georgia","Times",serif;margin:0}header{border-bottom:1px solid #f2f2f2;margin-bottom:12px}h1,h2,h3,h4,h5{color:#0066cc;margin:1em 0 .5em 0;font:200 1.79em / 1.2 "Helvetica","Arial",sans-serif}h1 .permalink,h2 .permalink,h3 .permalink,h4 .permalink,h5 .permalink{margin-left:0;opacity:0;transition:opacity .25s ease}h1:hover .permalink,h2:hover .permalink,h3:hover .permalink,h4:hover .permalink,h5:hover .permalink{opacity:1}.triple h1 .permalink,.triple h2 .permalink,.triple h3 .permalink,.triple h4 .permalink,.triple h5 .permalink{opacity:.15}.triple h1:hover .permalink,.triple h2:hover .permalink,.triple h3:hover .permalink,.triple h4:hover .permalink,.triple h5:hover .permalink{opacity:.15}h1{font:200 1.79em / 1.2 "Helvetica","Arial",sans-serif;font-size:36px}h2{font:200 1.79em / 1.2 "Helvetica","Arial",sans-serif;font-size:30px}h3{font-size:1.37em;text-transform:unset}h5{font-size:100%;font-weight:normal}p{margin:0 0 10px}p.choices{line-height:1.6}p a{text-decoration:underline}a{color:#2156a5;text-decoration:none}li p{margin:0}hr.split{border:0;height:1px;width:100%;padding-left:6px;margin:12px auto;background-image:linear-gradient(to right, rgba(0,0,0,0) 20%, rgba(0,0,0,0.2) 60%, rgba(255,255,255,0.2) 60%, rgba(255,255,255,0) 80%)}dl dt{float:left;width:130px;clear:left;text-align:right;overflow:hidden;text-overflow:ellipsis;white-space:nowrap;font-weight:700}dl dd{margin-left:150px}blockquote{color:rgba(0,0,0,0.3);font-size:15.5px;padding:10px 20px;margin:12px 0;border-left:5px solid #e8e8e8}blockquote p:last-child{margin-bottom:0}pre{background-color:#f5f5f5;padding:12px;border:1px solid #cfcfcf;border-radius:6px;overflow:auto;white-space:pre-wrap}pre code{color:rgba(0,0,0,0.8);background-color:transparent;padding:0;border:none}code{color:rgba(0,0,0,0.9);background-color:#f7f7f8;font:400 .875em / 1.2 "Droid Sans Mono","DejaVu Sans Mono",monospace;padding:0 3px;border:1px solid #eee;border-radius:3px;word-spacing:-0.15em;text-rendering:optimizeSpeed}ul,ol{padding-left:2em}table{border-collapse:collapse;border-spacing:0;margin-bottom:12px}table tr:nth-child(2n){background-color:#fafafa}table th,table td{padding:6px 12px;border:1px solid #e6e6e6}table th{font:200 1.79em / 1.2 "Helvetica","Arial",sans-serif;font-size:.95em;font-weight:700;background-color:skyblue;padding:9px}.text-muted{opacity:.5;margin-bottom:2.2em;font:400 .875em / 1.2 "Droid Sans Mono","DejaVu Sans Mono",monospace;font-size:.8em;word-spacing:-0.1em}.note,.warning{padding:.3em 1em;margin:1em 0;border-radius:2px;font-size:90%}.note h1,.warning h1,.note h2,.warning h2,.note h3,.warning h3,.note h4,.warning h4,.note h5,.warning h5,.note h6,.warning h6{font-family:200 1.79em / 1.2 "Helvetica","Arial",sans-serif;font-size:135%;font-weight:500}.note p,.warning p{margin:.5em 0}.note{color:rgba(0,0,0,0.8);background-color:#edf1f8;border-left:4px solid #2156a5}.note h1,.note h2,.note h3,.note h4,.note h5,.note h6{color:#2156a5}.warning{color:rgba(0,0,0,0.8);background-color:#fbf1f0;border-left:4px solid #c9302c}.warning h1,.warning h2,.warning h3,.warning h4,.warning h5,.warning h6{color:#c9302c}header{margin-top:24px}nav{position:fixed;top:24px;bottom:0;overflow-y:auto}nav .resource-group{padding:0}nav .resource-group .heading{position:relative}nav .resource-group .heading .chevron{position:absolute;top:12px;right:12px;opacity:.5}nav .resource-group .heading a{display:block;color:rgba(0,0,0,0.8);opacity:.7;border-left:2px solid transparent;margin:0}nav .resource-group .heading a:hover{text-decoration:none;background-color:bad-color;border-left:2px solid rgba(0,0,0,0.8)}nav ul{list-style-type:none;padding-left:0}nav ul a{display:block;font-size:13px;color:rgba(0,0,0,0.7);padding:8px 12px;border-top:1px solid #d9d9d9;border-left:2px solid transparent;overflow:hidden;text-overflow:ellipsis;white-space:nowrap}nav ul a:hover{text-decoration:none;background-color:bad-color;border-left:2px solid rgba(0,0,0,0.8)}nav ul>li{margin:0}nav ul>li:first-child{margin-top:-12px}nav ul>li:last-child{margin-bottom:-12px}nav ul ul a{padding-left:24px}nav ul ul li{margin:0}nav ul ul li:first-child{margin-top:0}nav ul ul li:last-child{margin-bottom:0}nav>div>div>ul>li:first-child>a{border-top:none}.preload *{transition:none !important}.pull-left{float:left}.pull-right{float:right}.badge{display:inline-block;float:right;min-width:10px;min-height:12px;padding:2px 7px;font-size:12px;color:#000;background-color:#f2f2f2;border-radius:5px;margin:-2px 0}.badge.get{color:#70bbe1;background-color:#d9edf7}.badge.head{color:#70bbe1;background-color:#d9edf7}.badge.options{color:#70bbe1;background-color:#d9edf7}.badge.put{color:#f0db70;background-color:#fcf8e3}.badge.patch{color:#f0db70;background-color:#fcf8e3}.badge.post{color:#93cd7c;background-color:#dff0d8}.badge.delete{color:#ce8383;background-color:#f2dede}.collapse-button{float:right}.collapse-button .close{display:none;color:#2156a5;cursor:pointer}.collapse-button .open{color:#2156a5;cursor:pointer}.collapse-button.show .close{display:inline}.collapse-button.show .open{display:none}.collapse-content{max-height:0;overflow:hidden;transition:max-height .3s ease-in-out}nav{width:220px}.container{max-width:940px;margin-left:auto;margin-right:auto}.container .row .content{margin-left:244px;width:696px}.container .row:after{content:'';display:block;clear:both}.container-fluid nav{width:22%}.container-fluid .row .content{margin-left:24%}.container-fluid.triple nav{width:16%;padding-right:1px}.container-fluid.triple .row .content{position:relative;margin-left:16%;padding-left:24px}.middle:before,.middle:after{content:'';display:table}.middle:after{clear:both}.middle{box-sizing:border-box;width:60%;padding-right:12px}.middle div.title{font:200 1.79em / 1.2 "Helvetica","Arial",sans-serif;font-size:.95em;font-weight:bold}.middle dl dt{font:200 1.79em / 1.2 "Helvetica","Arial",sans-serif;font-size:.88em;font-weight:bold;letter-spacing:-0.02em;line-height:1.9em;width:150px}.middle dl dd{margin-left:155px}.right{box-sizing:border-box;float:right;width:40%;padding-left:12px}.right a{color:#70bbe1}.right h1,.right h2,.right h3,.right h4,.right h5,.right p,.right div{color:white}.right div.tabs div.example-names,.right h5{font:200 1.79em / 1.2 "Helvetica","Arial",sans-serif;font-size:.8em;margin:.5em 0 0}.right pre{background-color:#1d1f21;border:1px solid #1d1f21;margin:.5em 0 0;padding:.5em}.right pre code{color:#c5c8c6;font-size:.8em}.right pre code.meta{font-size:1em;font-weight:900}.right .description{margin-top:12px}.right .description p code{color:#c5c8c6;background-color:#1d1f21;border:1px solid #1d1f21}.triple .resource-heading{font-size:1.6em}.definition{margin-top:12px;margin-bottom:12px;font:200 1.79em / 1.2 "Helvetica","Arial",sans-serif;font-size:.9em;letter-spacing:-0.05em}.definition .method{font-weight:bold}.definition .method.get{color:#2e8ab8}.definition .method.head{color:#2e8ab8}.definition .method.options{color:#2e8ab8}.definition .method.post{color:#56b82e}.definition .method.put{color:#b8a22e}.definition .method.patch{color:#b8a22e}.definition .method.delete{color:#b82e2e}.definition .uri{font:400 .875em / 1.2 "Droid Sans Mono","DejaVu Sans Mono",monospace;font-size:.95em;margin-left:.3em;word-break:break-all;word-wrap:break-word}.definition .hostname{opacity:.5}.example-names{background-color:#eee;padding:12px;border-radius:6px}.example-names .tab-button{cursor:pointer;color:rgba(0,0,0,0.8);border:1px solid #ddd;padding:6px;margin-left:12px}.example-names .tab-button.active{background-color:#d5d5d5}.right .example-names{background-color:#444}.right .example-names .tab-button{color:white;border:1px solid #666;border-radius:6px}.right .example-names .tab-button.active{background-color:#5e5e5e}#nav-background{position:fixed;left:0;top:0;bottom:0;width:16%;padding-right:14.4px;background-color:#fbfbfb;border-right:1px solid #f0f0f0;z-index:-1}#right-panel-background{position:absolute;right:0;top:-6px;bottom:-12px;width:34%;background-color:#333;z-index:-1}@media (max-width:1200px){nav{width:198px}.container{max-width:840px}.container .row .content{margin-left:224px;width:606px}}@media (max-width:992px){nav{width:169.4px}.container{max-width:720px}.container .row .content{margin-left:194px;width:526px}}@media (max-width:768px){nav{display:none}.container{width:95%;max-width:none}.container .row .content,.container-fluid .row .content,.container-fluid.triple .row .content{margin-left:auto;margin-right:auto;width:95%}#nav-background{display:none}#right-panel-background{width:34%}}.back-to-top{position:fixed;z-index:1;bottom:0;right:24px;padding:4px 8px;color:rgba(0,0,0,0.3);background-color:#f2f2f2;text-decoration:none !important;border-top:1px solid #d9d9d9;border-left:1px solid #d9d9d9;border-right:1px solid #d9d9d9;border-top-left-radius:3px;border-top-right-radius:3px}.resource-group{padding:12px;margin-bottom:12px;background-color:white;border:1px solid #d9d9d9;border-radius:6px}.resource-group h2.group-heading,.resource-group .heading a{padding:12px;margin:-12px -12px 12px -12px;background-color:#f2f2f2;border-bottom:1px solid #d9d9d9;border-top-left-radius:6px;border-top-right-radius:6px;white-space:nowrap;text-overflow:ellipsis;overflow:hidden}.triple .content .resource-group{padding:25px 0 0;border:none}.triple .content .resource-group h2.group-heading,.triple .content .resource-group .heading a{margin:0 0 12px 0;border:1px solid #d9d9d9}nav .resource-group .heading a{padding:12px;margin-bottom:0}nav .resource-group .collapse-content{padding:0}.action{margin-bottom:12px;padding:12px 12px 0 12px;overflow:hidden;border:1px solid transparent;border-radius:6px}.action h4.action-heading{padding:6px 12px;margin:-12px -12px 12px -12px;border-bottom:1px solid transparent;border-top-left-radius:6px;border-top-right-radius:6px;overflow:hidden;font:200 1.79em / 1.2 "Helvetica","Arial",sans-serif;font-size:.95em;font-weight:bold;letter-spacing:-0.05em}.action h4.action-heading .name{float:right;font-weight:normal;padding:6px 0}.action h4.action-heading .method{padding:6px 12px;margin-right:12px;border-radius:3px;display:inline-block}.action h4.action-heading .method.get{color:#fff;background-color:#1b4889}.action h4.action-heading .method.head{color:#fff;background-color:#1b4889}.action h4.action-heading .method.options{color:#fff;background-color:#1b4889}.action h4.action-heading .method.put{color:#fff;background-color:#ed9c28}.action h4.action-heading .method.patch{color:#fff;background-color:#ed9c28}.action h4.action-heading .method.post{color:#fff;background-color:#5cb85c}.action h4.action-heading .method.delete{color:#fff;background-color:#d9534f}.action h4.action-heading code{color:rgba(0,0,0,0.9);background-color:#f7f7f8;border-color:#cfcfcf;font-weight:normal;word-break:break-all;display:inline-block;margin-top:2px}.action dl.inner{padding-bottom:2px}.action .title{border-bottom:1px solid white;margin:0 -12px -1px -12px;padding:12px}.action.get{border-color:#bce8f1}.action.get h4.action-heading{color:#1b4889;background:#d9edf7;border-bottom-color:#bce8f1}.action.head{border-color:#bce8f1}.action.head h4.action-heading{color:#1b4889;background:#d9edf7;border-bottom-color:#bce8f1}.action.options{border-color:#bce8f1}.action.options h4.action-heading{color:#1b4889;background:#d9edf7;border-bottom-color:#bce8f1}.action.post{border-color:#d6e9c6}.action.post h4.action-heading{color:#5cb85c;background:#dff0d8;border-bottom-color:#d6e9c6}.action.put{border-color:#faebcc}.action.put h4.action-heading{color:#ed9c28;background:#fcf8e3;border-bottom-color:#faebcc}.action.patch{border-color:#faebcc}.action.patch h4.action-heading{color:#ed9c28;background:#fcf8e3;border-bottom-color:#faebcc}.action.delete{border-color:#ebccd1}.action.delete h4.action-heading{color:#d9534f;background:#f2dede;border-bottom-color:#ebccd1}p,td.content{letter-spacing:-0.01em;-webkit-font-smoothing:antialiased;text-rendering:optimizeLegibility}nav{top:33px;font:200 1.79em / 1.2 "Helvetica","Arial",sans-serif;padding:0;background-color:#fbfbfb;border-right:1px solid #f0f0f0}nav .resource-group{margin:6px}nav .resource-group a,nav .resource-group ul a,nav .resource-group .heading a,nav .resource-group .chevron{letter-spacing:-0.03em;-webkit-font-smoothing:antialiased;font-size:15px;color:#0066cc}nav .resource-group ul a{font-size:13px}nav .resource-group .collapse-content>ul{margin:0 0 0 0}nav .resource-group ul>li{margin:0}nav .resource-group ul>li:first-child{margin-top:0}nav .resource-group ul>li:last-child{margin-bottom:0}.sitenav{font:200 1.79em / 1.2 "Helvetica","Arial",sans-serif;font-weight:bold;position:fixed;left:0;top:0;width:100%;height:32px;padding-right:14.4px;background-color:#eee;border-bottom:1px solid #c4c4c4;display:block;overflow:hidden}.sitenav a{float:left;color:#0066cc;text-align:center;text-decoration:none;padding:10px 14px 2px 14px;font-size:15px;border-bottom:2px solid transparent}.sitenav a:hover{text-decoration:none;border-bottom:2px solid rgba(0,0,0,0.8);background-color:#e1e1e1}.sitenav a.active{background-color:#d5d5d5;color:#2156a5}.sitenav a.active:hover{background-color:#d5d5d5;border-bottom:2px solid #d5d5d5}.sitenav img{height:30px;border:0;float:left;padding:2px 12px 0}.sitenav span{font:400 1.05em / 1.6 "Georgia","Times",serif;font-size:18px;font-style:italic;font-weight:500;color:#e1976e;background-color:transparent;padding:4px 12px 2px 0;float:left}.container-fluid.triple{top:38px;position:fixed;height:100%;width:100%}.container-fluid.triple .row{height:100%}.container-fluid.triple .row .content{overflow-y:auto;height:100%;margin-top:0;top:0;padding-left:12px}.container-fluid.triple .row .content .right{padding-right:12px}.container-fluid.triple .nav{padding:0}</style></head><body class="preload"><div class="sitenav"><img src="https://www.openehr.org/static/img/about/Logo.png"><span>REST API specification:</span><a href="overview.html" class="active">Overview</a><a href="ehr.html">Ehr</a><a href="query.html">Query</a><a href="definitions.html">Definitions</a></div><div class="container-fluid triple"><div class="row"><nav><div class="resource-group"><div class="heading"><div class="chevron"><i class="open fa fa-angle-down"></i></div><a href="#top">Overview</a></div><div class="collapse-content"><ul><li><a href="#header-preface">Preface</a></li><li><a href="#header-glossary-and-conventions">Glossary and conventions</a></li></ul></div></div><div class="resource-group"><div class="heading"><div class="chevron"><i class="open fa fa-angle-down"></i></div><a href="#design-considerations">Design considerations</a></div><div class="collapse-content"><ul><li><a href="#design-considerations-authentication-and-authorization">Authentication and authorization</a><ul></ul></li><li><a href="#design-considerations-options-and-conformance-options"><span class="badge options"><i class="fa fa-dot-circle-o"></i></span>Options and conformance</a></li><li><a href="#design-considerations-http-headers">HTTP headers</a><ul></ul></li><li><a href="#design-considerations-http-status-codes">HTTP status codes</a><ul></ul></li><li><a href="#design-considerations-resources">Resources</a><ul></ul></li><li><a href="#design-considerations-data-representation">Data representation</a><ul></ul></li><li><a href="#design-considerations-representation-details-negotiation">Representation details negotiation</a><ul></ul></li></ul></div></div></nav><div id="right-panel-background"></div><div class="content"><div class="middle"><header><h1 id="top">API Overview</h1></header></div><div class="right"><h5>Release<pre><code class="meta">1.0.2</code></pre></h5><h5>Status<pre><code class="meta">TRIAL</code></pre></h5><h5>Date<pre><code class="meta">15 Mar 2021</code></pre></h5><h5>API Endpoint<pre><code class="meta">{baseUrl}/v1</code></pre></h5></div><div class="middle"><table>
    <colgroup>
        <col style="width: 20%;">
        <col style="width: 80%;">
    </colgroup>
    <thead>
    <tr>
        <th colspan="2">© 2003 - 2019 The openEHR Foundation</th>
    </tr>
    </thead>
    <tbody>
    <tr>
        <td colspan="2">The <a href="https://www.openEHR.org" target="_blank" rel="noopener">openEHR Foundation</a> is an independent, non-profit community organisation, facilitating the sharing of
            health records by consumers and clinicians via open standards-based implementations.
        </td>
    </tr>
    <tr>
        <td><strong>Licence</strong></td>
        <td><span class="image"><img src="https://specifications.openehr.org/images/cc-by-nd-88x31.png" alt="image"></span> Creative Commons Attribution-NoDerivs 3.0 Unported.
            <a href="https://creativecommons.org/licenses/by-nd/3.0/" class="bare">https://creativecommons.org/licenses/by-nd/3.0/</a>
        </td>
    </tr>
    <tr>
        <td><strong>Support</strong></td>
        <td>Issues: <a href="https://specifications.openehr.org/components/ITS/open_issues" target="_blank" rel="noopener">Problem Reports</a><br>
            Web: <a href="https://specifications.openehr.org" target="_blank" rel="noopener">specifications.openEHR.org</a>
        </td>
    </tr>
    </tbody>
</table>
<p><h3>Amendment Record</h3></p>
<table>
    <colgroup>
        <col style="width: 9%;">
        <col style="width: 55%;">
        <col style="width: 18%;">
        <col style="width: 18%;">
    </colgroup>
    <thead>
    <tr>
        <th>Issue</th>
        <th>Details</th>
        <th>Raiser, Implementer</th>
        <th>Completed</th>
    </tr>
    </thead>
    <tbody>
    <tr>
        <th colspan="4"><a href="https://specifications.openehr.org/releases/ITS-REST/latest" target="_blank" rel="noopener">Release-1.0.2 (unreleased)</a></th>
    </tr>
    <tr>
        <td>3.2</td>
        <td><a href="https://specifications.openehr.org/tickets/SPECITS-56" target="_blank" rel="noopener">SPECITS-56</a>:
            Fixing typos, formatting and minor documentary errors</td>
        <td>S Iancu</td>
        <td>15 Mar 2021</td>
    </tr>
    <tr>
        <td>3.2</td>
        <td><a href="https://specifications.openehr.org/tickets/SPECITS-45" target="_blank" rel="noopener">SPECITS-45</a>:
            Describe more clearly the datetime format for REST API</td>
        <td>P Pazos, S Iancu</td>
        <td>15 Mar 2021</td>
    </tr>
    <tr>
        <td>3.1</td>
        <td><a href="https://specifications.openehr.org/tickets/SPECITS-57" target="_blank" rel="noopener">SPECITS-57</a>:
            Updating info about simplified JSON formats</td>
        <td>E Sundvall, S Iancu</td>
        <td>13 Mar 2021</td>
    </tr>
    <tr>
        <td>3.0</td>
        <td><a href="https://specifications.openehr.org/tickets/SPECITS-49" target="_blank" rel="noopener">SPECITS-49</a>:
            Describing Resource Identification; add clarification over getting COMPOSITIONs by with `version_uid` vs `versioned_object_uid`</td>
        <td>J Smolka, M Polajnar, S Iancu</td>
        <td>08 Mar 2021</td>
    </tr>
    <tr>
        <th colspan="43"><a href="https://specifications.openehr.org/releases/ITS-REST/Release-1.0.1" target="_blank" rel="noopener">Release-1.0.1</a></th>
    </tr>
    <tr>
        <td>2.4</td>
        <td><a href="https://specifications.openehr.org/tickets/SPECITS-33" target="_blank" rel="noopener">SPECITS-33</a>: Add reference to Simplified Data Template (SDT) format specification</td>
        <td>I McNicoll, T Beale, S Iancu</td>
        <td>17 Oct 2019</td>
    </tr>
    <tr>
        <td>2.3</td>
        <td><a href="https://specifications.openehr.org/tickets/SPECITS-32" target="_blank" rel="noopener">SPECITS-32</a>: Fix typos and minor documentary errors</td>
        <td>J Smolka, P Pazos, T Beale, S Iancu</td>
        <td>19 Jul 2019</td>
    </tr>
    <tr>
        <td>2.2</td>
        <td><a href="https://specifications.openehr.org/tickets/SPECITS-24" target="_blank" rel="noopener">SPECITS-24</a>: Added changelog</td>
        <td>J Smolka, S Iancu</td>
        <td>12 May 2019</td>
    </tr>
    <tr>
        <td></td>
        <td><a href="https://specifications.openehr.org/tickets/SPECITS-25" target="_blank" rel="noopener">SPECITS-25</a>,
            <a href="https://specifications.openehr.org/tickets/SPECITS-29" target="_blank" rel="noopener">SPECITS-29</a>: Change layout and structure</td>
        <td>J Smolka, S Iancu</td>
        <td>12 May 2019</td>
    </tr>
    <tr>
        <td>2.1</td>
        <td>Update links to new openEHR specifications website</td>
        <td>S Iancu</td>
        <td>16 Dec 2018</td>
    </tr>
    <tr>
        <th colspan="4"><a href="https://specifications.openehr.org/releases/ITS-REST/Release-1.0.0" target="_blank" rel="noopener">Release-1.0.0</a></th>
    </tr>
    </tbody>
</table>
<h2 id="header-preface">Preface <a class="permalink" href="#header-preface" aria-hidden="true">¶</a></h2>
<p><h3>Purpose</h3></p>
<p>This specification describes service endpoints, resources, functions and operations
as well as details of requests and responses that interacts with an openEHR API in a RESTful manner.</p>
<p><h3>Related Documents</h3></p>
<p>Prerequisite documents for reading this document include:</p>
<ul>
<li>The <a href="https://specifications.openehr.org/releases/BASE/latest/architecture_overview.html">openEHR Architecture Overview</a></li>
</ul>
<p>Related documents include:</p>
<ul>
<li>
<p>The <a href="https://specifications.openehr.org/classes">openEHR Global Class Index</a></p>
</li>
<li>
<p>The <a href="https://specifications.openehr.org/releases/ITS-XML/latest">XML-Schemas (XSD)</a></p>
</li>
<li>
<p>The <a href="https://specifications.openehr.org/releases/ITS-JSON/latest">JSON-Schemas</a> and <a href="simplified_data_template.html">Simplified Data Template (SDT)</a></p>
</li>
<li>
<p>The <a href="https://specifications.openehr.org/releases/SM/latest/openehr_platform.html">openEHR Platform Abstract Service Model</a></p>
</li>
</ul>
<p><h3>Status</h3></p>
<p>This specification is in the <code>TRIAL</code> state. It might not be complete and can still be subject to changes before the final release.
Users are encouraged to comment on and/or advise on these paragraphs as well as the main content.</p>
<p>The development version of this document can be found at <a href="https://specifications.openehr.org/releases/ITS-REST/latest">https://specifications.openehr.org/releases/ITS-REST/latest</a>.</p>
<p><h3>Feedback</h3></p>
<p>Feedback may be provided on the technical mailing list or on <a href="https://github.com/openEHR/specifications-ITS-REST/issues">github repo</a>.</p>
<p>Issues may be raised on the <a href="https://openehr.atlassian.net/browse/SPECPR">specifications Problem Report tracker</a>.</p>
<p>To see changes made due to previously reported issues, see the <a href="https://specifications.openehr.org/components/ITS/history">ITS component Change Request tracker</a>.</p>
<p><h3>Trademarks</h3></p>
<ul>
<li>‘openEHR’ is a trademark of the <a href="https://www.openEHR.org">openEHR Foundation</a></li>
</ul>
<h2 id="header-glossary-and-conventions">Glossary and conventions <a class="permalink" href="#header-glossary-and-conventions" aria-hidden="true">¶</a></h2>
<p>The key words “MUST”, “MUST NOT”, “REQUIRED”, “SHALL”, “SHALL NOT”, “SHOULD”, “SHOULD NOT”, “RECOMMENDED”, “NOT RECOMMENDED”, “MAY”, and “OPTIONAL”
in this document are to be interpreted as described in <a href="https://tools.ietf.org/html/bcp14">BCP 14</a> <a href="https://tools.ietf.org/html/rfc2119">RFC 2119</a>
<a href="https://tools.ietf.org/html/rfc8174">RFC 8174</a> when, and only when, they appear in all capitals, as shown here.</p>
<p>Throughout this specification, a set of short terms is being used as described below:</p>
<table>
<thead>
<tr>
<th>Term</th>
<th>Description</th>
</tr>
</thead>
<tbody>
<tr>
<td>API</td>
<td>Application Programmer Interface</td>
</tr>
<tr>
<td>REST</td>
<td><a href="https://en.wikipedia.org/wiki/Representational_state_transfer">Representational state transfer</a>, a type of Web service that allows clients to access and manipulate textual representations of Web resources.</td>
</tr>
<tr>
<td>AQL</td>
<td>openEHR’s <a href="https://specifications.openehr.org/releases/QUERY/latest/AQL.html">Archetype Query Language</a></td>
</tr>
<tr>
<td>SEMVER</td>
<td><a href="https://semver.org/">Semantic Versioning 2.0.0</a></td>
</tr>
<tr>
<td><code>{baseUrl}</code></td>
<td>The base URL of the openEHR APIs; the value depends on the implementation (e.g. <code>https://api.best-ehr-sys.io/rest</code>)</td>
</tr>
<tr>
<td><code>UUID</code></td>
<td>A universally unique identifier as described by <a href="https://tools.ietf.org/html/rfc4122">RFC 4122</a> (e.g. 8849182c-82ad-4088-a07f-48ead4180515)</td>
</tr>
<tr>
<td><code>ehr_id</code></td>
<td>The value for an EHR identifier, stored under EHR.ehr_id.value, usually an <code>UUID</code> or a <code>GUID</code> (e.g. 7d44b88c-4199-4bad-97dc-d78268e01398)</td>
</tr>
<tr>
<td><code>versioned_object_uid</code></td>
<td>The value of a VERSIONED_OBJECT unique identifier, stored under VERSIONED_OBJECT.uid.value (e.g. 8849182c-82ad-4088-a07f-48ead4180515)</td>
</tr>
<tr>
<td><code>version_uid</code></td>
<td>The value of a VERSION unique identifier, stored under VERSION.uid.value (e.g. 8849182c-82ad-4088-a07f-48ead4180515::openEHRSys.example.com::2)</td>
</tr>
<tr>
<td><code>preceding_version_uid</code></td>
<td>The value of a previous VERSION unique identifier, used usually for PUT or DELETE methods (e.g. 8849182c-82ad-4088-a07f-48ead4180515::openEHRSys.example.com::1)</td>
</tr>
<tr>
<td><code>version_at_time</code></td>
<td>Time specifier used to retrieve the VERSION at a given time; the value is in the extended ISO 8601 format (e.g. 2015-01-20T19:30:22.765+01:00)</td>
</tr>
</tbody>
</table>
<p><h3>HTTP Methods</h3></p>
<p>HTTP Methods are described by <a href="https://tools.ietf.org/html/rfc7231#section-4">RFC 7231</a>
and by <a href="https://www.iana.org/assignments/http-methods/http-methods.xhtml">IANA HTTP Method Registry</a>.
The following subset is being used in this specification:</p>
<table>
<thead>
<tr>
<th>Method</th>
<th>Description</th>
</tr>
</thead>
<tbody>
<tr>
<td>GET</td>
<td>Transfer a current representation of the target resource.</td>
</tr>
<tr>
<td>POST</td>
<td>Perform resource-specific processing on the request payload.</td>
</tr>
<tr>
<td>PUT</td>
<td>Replace all current representations of the target resource with the request payload.</td>
</tr>
<tr>
<td>DELETE</td>
<td>Remove all current representations of the target resource.</td>
</tr>
<tr>
<td>OPTIONS</td>
<td>Describe the communication options for the target resource.</td>
</tr>
</tbody>
</table>
<p><h3>HTTP Status codes</h3></p>
<p>HTTP Status codes are described by <a href="https://tools.ietf.org/html/rfc7231#section-6">RFC 7231</a>
and by the <a href="https://www.iana.org/assignments/http-status-codes/http-status-codes.xhtml">IANA Status Code Registry</a>.
The following subset of the is being used in this specification:</p>
<table>
<thead>
<tr>
<th>Code</th>
<th>Reason-Phrase</th>
<th>Meaning, usecase and details</th>
</tr>
</thead>
<tbody>
<tr>
<td>200</td>
<td>OK</td>
<td>The request succeeded, payload sent in a 200 response depends on the request method</td>
</tr>
<tr>
<td>201</td>
<td>Created</td>
<td>The request has been fulfilled and has resulted in one or more new resources being created</td>
</tr>
<tr>
<td>204</td>
<td>No content</td>
<td>The request has been fulfilled and there is no additional content to send in the response payload body</td>
</tr>
<tr>
<td>400</td>
<td>Bad request</td>
<td>The service cannot or will not process the request due to something that is perceived to be a client error (e.g., malformed request syntax, syntactically invalid content)</td>
</tr>
<tr>
<td>401</td>
<td>Unauthorized</td>
<td>If the service requires authorization, this indicates that the request has not been applied because it lacks valid authentication credentials for the target resource</td>
</tr>
<tr>
<td>403</td>
<td>Forbidden</td>
<td>The service understood the request but refuses to authorize it</td>
</tr>
<tr>
<td>404</td>
<td>Not found</td>
<td>The origin service did not find the target resource or is not willing to disclose that one exists</td>
</tr>
<tr>
<td>405</td>
<td>Method Not Allowed</td>
<td>The method received in the request-line is known by the origin service but not supported by the target resource</td>
</tr>
<tr>
<td>406</td>
<td>Not Acceptable</td>
<td>The target resource does not have a current representation that would be acceptable to the user</td>
</tr>
<tr>
<td>408</td>
<td>Request Timeout</td>
<td>Request maximum execution time is reached, therefore the server aborted the request</td>
</tr>
<tr>
<td>409</td>
<td>Conflict</td>
<td>Indicates that the request could not be processed because it might generate a duplicate or a conflict</td>
</tr>
<tr>
<td>412</td>
<td>Precondition Failed</td>
<td>One or more conditions given in the request header fields evaluated to false when tested on the server</td>
</tr>
<tr>
<td>415</td>
<td>Unsupported Media Type</td>
<td>The service is refusing the request because the payload is in a format not supported by this method on the target resource</td>
</tr>
<tr>
<td>422</td>
<td>Unprocessable Entity</td>
<td>The request was well-formed but was unable to be followed due to semantic errors</td>
</tr>
<tr>
<td>500</td>
<td>Internal Server Error</td>
<td>The service encountered an unexpected condition that prevented it from fulfilling the request</td>
</tr>
<tr>
<td>501</td>
<td>Not Implemented</td>
<td>The service does not support the functionality required to fulfill the request</td>
</tr>
</tbody>
</table>
</div><div class="middle"><section id="design-considerations" class="resource-group"><h2 class="group-heading">Design considerations <a href="#design-considerations" class="permalink">&para;</a></h2><p>The following describes in details how HTTP <a href="#design-considerations-http-headers">headers</a> and <a href="#design-considerations-http-status-codes">status codes</a>
MUST be used by an openEHR REST API implementation in order to achieve good interaction between services and clients in the spirit of this specification.</p>
<p>Furthermore, general details about resources, <a href="#design-considerations-data-representation">data representation</a> and content negotiation are described in this specification.</p>
<blockquote>
<p>NOTE: <strong>JSON</strong> format is used in many of the example below, but this does not imply that <strong>XML</strong> might not be supported by the same service endpoint.</p>
</blockquote>
</section></div><div class="middle"><div id="design-considerations-authentication-and-authorization" class="resource"><h3 class="resource-heading">Authentication and authorization <a href="#design-considerations-authentication-and-authorization" class="permalink">&para;</a></h3><p>Services SHOULD implement and support an HTTP Authentication and Authorization framework
(which can support various schemes) but there is no assumption or recommendation being made
in this specification about which authentication scheme should be used by services and clients.
See <a href="https://tools.ietf.org/html/rfc7235">RFC 7235</a> or <a href="https://developer.mozilla.org/en-US/docs/Web/HTTP/Authentication">Mozilla’s HTTP Authentication</a>
for details on this subject.</p>
<p>If an Authentication and Authorisation framework is present, services MUST properly use <code>WWW-Authenticate</code> and/or
<code>Proxy-Authenticate</code> response headers and return HTTP status code <code>403 Forbidden</code> or <code>401 Unauthorized</code> or
<code>407 Proxy Authentication</code> whenever applicable, and clients MUST properly use <code>Authorization</code> and <code>Proxy-Authorization</code>
in their request headers.</p>
</div></div><div class="middle"><div id="design-considerations-options-and-conformance" class="resource"><h3 class="resource-heading">Options and conformance <a href="#design-considerations-options-and-conformance" class="permalink">&para;</a></h3></div></div><div class="right"><div class="definition"><span class="method options">OPTIONS</span>&nbsp;<span class="uri"><span class="hostname">{baseUrl}/v1</span>/</span></div><div class="tabs"><div class="example-names"><span>Requests</span><span class="tab-button">Inspect services and conformance</span></div><div class="tab"><div><div class="inner"><h5>Headers</h5><pre><code><span class="hljs-attribute">Accept</span>: <span class="hljs-string">application/json</span></code></pre><div style="height: 1px;"></div></div></div><div class="tabs"><div class="example-names"><span>Responses</span><span class="tab-button">200</span></div><div class="tab"><div><div class="inner"><h5>Headers</h5><pre><code><span class="hljs-attribute">Content-Type</span>: <span class="hljs-string">application/json</span><br><span class="hljs-attribute">Allow</span>: <span class="hljs-string">GET, POST, PUT, DELETE, OPTIONS</span></code></pre><div style="height: 1px;"></div><h5>Body</h5><pre><code>{
  "<span class="hljs-attribute">solution</span>": <span class="hljs-value"><span class="hljs-string">"openEHRSys"</span></span>,
  "<span class="hljs-attribute">solution_version</span>": <span class="hljs-value"><span class="hljs-string">"v0.9"</span></span>,
  "<span class="hljs-attribute">vendor</span>": <span class="hljs-value"><span class="hljs-string">"My-openEHR"</span></span>,
  "<span class="hljs-attribute">restapi_specs_version</span>": <span class="hljs-value"><span class="hljs-string">"v1.0.2"</span></span>,
  "<span class="hljs-attribute">conformance_profile</span>": <span class="hljs-value"><span class="hljs-string">"STANDARD"</span></span>,
  "<span class="hljs-attribute">endpoints</span>": <span class="hljs-value">[
    <span class="hljs-string">"/ehr"</span>,
    <span class="hljs-string">"/definition"</span>,
    <span class="hljs-string">"/query"</span>
  ]
</span>}</code></pre><div style="height: 1px;"></div></div></div></div></div></div></div></div><div class="middle"><div id="design-considerations-options-and-conformance-options" class="action options"><h4 class="action-heading"><div class="name"></div><a href="#design-considerations-options-and-conformance-options" class="method options">OPTIONS</a><code class="uri">/</code></h4><p>The <code>OPTIONS</code> HTTP method allows a client to determine the options and/or requirements associated with a
resource, or the capabilities of the service, without implying a resource action.
Services SHOULD respond to this method with at least appropriate HTTP codes, headers and potentially with a payload
revealing more details themselves.</p>
<p>Another use-case for this method is related to exposing service capabilities for a conformance manifest.</p>
</div></div><hr class="split"><div class="middle"><div id="design-considerations-http-headers" class="resource"><h3 class="resource-heading">HTTP headers <a href="#design-considerations-http-headers" class="permalink">&para;</a></h3><p>Standard HTTP Request and Response headers are described by <a href="https://tools.ietf.org/html/rfc7231">RFC 7231</a>
and by the <a href="http://www.iana.org/assignments/message-headers/message-headers.xhtml">IANA Message Headers</a>.
The following describes the use of a subset of these headers, as well as the custom headers used by an openEHR API.</p>
<p><h3>The <code>openEHR-VERSION</code> and <code>openEHR-AUDIT_DETAILS</code> headers</h3></p>
<p>When it comes to committing content to an openEHR system, for all change-controlled resources (e.g. COMPOSITION, EHR_STATUS, FOLDER, etc.) the services are
<a href="https://specifications.openehr.org/releases/RM/latest/common.html#_change_control_package">performing versioning</a> under the hood.
The ‘native’ way of committing is to use a <a href="https://specifications.openehr.org/releases/RM/latest/common.html#_contributions">CONTRIBUTION</a>
and wrap the content as a <a href="https://specifications.openehr.org/releases/RM/latest/common.html#_version_class">VERSION</a>.
To keep things simpler and consistent, services MUST also allow <code>PUT</code>, <code>POST</code> and <code>DELETE</code> methods directly on these change-controlled resources.
However, these operations MUST internally be executed using the ‘native’ way.</p>
<p>In order to allow clients to provide committal metadata, services MUST accept <code>openEHR-VERSION</code> and <code>openEHR-AUDIT_DETAILS</code> custom request headers.
For clients, it is RECOMMENDED to provision these headers based on <a href="#design-considerations-authentication-and-authorization">authentication and authorization</a> runtime data.
Below is a complex example of these request headers used in a <code>PUT</code> action to update a COMPOSITION:</p>
<pre><code class="language-http"><span class="hljs-attribute">openEHR-VERSION.lifecycle_state</span>: <span class="hljs-string">code_string="532"</span>
<span class="hljs-attribute">openEHR-AUDIT_DETAILS.change_type</span>: <span class="hljs-string">code_string="251"</span>
<span class="hljs-attribute">openEHR-AUDIT_DETAILS.description</span>: <span class="hljs-string">value="An updated composition contribution description"</span>
<span class="hljs-attribute">openEHR-AUDIT_DETAILS.committer</span>: <span class="hljs-string">name="John Doe", external_ref.id="BC8132EA-8F4A-11E7-BB31-BE2E44B06B34", external_ref.namespace="demographic", external_ref.type="PERSON"</span></code></pre>
<p>None of these headers are mandatory, but whatever is provided it MUST be merged with the default VERSION and VERSION.audit_details attributes on commit runtime.</p>
<p>Below a list of <code>code_string</code> values and their meaning (taken from <a href="https://raw.githubusercontent.com/openEHR/terminology/Release-2.0.0/openEHR_RM/en/openehr_terminology.xml">openEHR terminology</a>):</p>
<table>
<thead>
<tr>
<th>header</th>
<th>code</th>
<th>value / meaning</th>
</tr>
</thead>
<tbody>
<tr>
<td>openEHR-VERSION.lifecycle_state</td>
<td>532</td>
<td>complete</td>
</tr>
<tr>
<td>openEHR-VERSION.lifecycle_state</td>
<td>553</td>
<td>incomplete</td>
</tr>
<tr>
<td>openEHR-VERSION.lifecycle_state</td>
<td>523</td>
<td>deleted</td>
</tr>
<tr>
<td>openEHR-AUDIT_DETAILS.change_type</td>
<td>249</td>
<td>creation</td>
</tr>
<tr>
<td>openEHR-AUDIT_DETAILS.change_type</td>
<td>250</td>
<td>amendment</td>
</tr>
<tr>
<td>openEHR-AUDIT_DETAILS.change_type</td>
<td>251</td>
<td>modification</td>
</tr>
<tr>
<td>openEHR-AUDIT_DETAILS.change_type</td>
<td>252</td>
<td>synthesis</td>
</tr>
<tr>
<td>openEHR-AUDIT_DETAILS.change_type</td>
<td>523</td>
<td>deleted</td>
</tr>
<tr>
<td>openEHR-AUDIT_DETAILS.change_type</td>
<td>666</td>
<td>attestation</td>
</tr>
<tr>
<td>openEHR-AUDIT_DETAILS.change_type</td>
<td>253</td>
<td>unknown</td>
</tr>
</tbody>
</table>
<p><h3>The <code>If-Match</code> header and accidental overwrites</h3></p>
<p>The use case of this is described by <a href="https://tools.ietf.org/html/rfc7232#section-3.1">RFC 7232</a>.</p>
<pre><code class="language-http"><span class="hljs-attribute">If-Match</span>: <span class="hljs-string">8849182c-82ad-4088-a07f-48ead4180515::openEHRSys.example.com::2</span></code></pre>
<p>This HTTP request header SHOULD be used by the clients to prevent accidental overwrites when multiple user
agents might be acting in parallel on the same resource. This is only required by a small set of resources of this specification,
as in most of the other cases the <code>preceding_version_uid</code> path segment is instead required in order to prevent such accidental overwrites.
In case a service receives this header, and the condition evaluates to <code>false</code>, it MUST respond with
HTTP status code <code>412 Precondition Failed</code> and return also latest <code>version_uid</code> in the <code>Location</code> and <code>ETag</code> response headers.</p>
<p><h3>The <code>openEHR-TEMPLATE_ID</code> header</h3></p>
<p>This request header MUST be used whenever committing COMPOSITION (via <code>PUT</code> or <code>POST</code> methods)
using a <a href="#header-alternative-data-formats">simplified data format</a> which does not support TEMPLATE_ID value
under an equivalent <code>LOCATABLE.archetype_details.template_id</code> attribute of contained data.</p>
<p><h3>The <code>Location</code> and <code>openEHR-uri</code> header</h3></p>
<p>This response header indicates the resource location (URL).
According to <a href="https://tools.ietf.org/html/rfc7231#section-7.1.2">RFC 7231</a>, it is used to refer to a specific resource in relation to the response.
The type of relationship is defined by the combination of request method and status code semantics.
The identifiers part of this URI-reference SHOULD comply with <a href="#header-resource-identification">resource identification</a> semantics of this specification.</p>
<p>Services MUST return this header whenever a create or update operation was performed, but it MAY
return this header on other operation or action. Example:</p>
<pre><code class="language-http"><span class="hljs-attribute">Location</span>: <span class="hljs-string">{baseUrl}/ehr/347a5490-55ee-4da9-b91a-9bba710f730e/composition/8849182c-82ad-4088-a07f-48ead4180515::openEHRSys.example.com::2</span></code></pre>
<p>See <a href="#representation-details-negotiation">representation details negotiation</a> section
for more details on how use this header.</p>
<p>If services have support to generate resource URL as specified by the DV_URI/DV_EHR_URI format, then they MAY send also <code>openEHR-uri</code> response header. Example:</p>
<pre><code class="language-http"><span class="hljs-attribute">openEHR-uri</span>: <span class="hljs-string">ehr:/347a5490-55ee-4da9-b91a-9bba710f730e/compositions/87284370-2D4B-4e3d-A3F3-F303D2F4F34B</span></code></pre>
<p><h3>The <code>Prefer</code> header</h3></p>
<p>This request header MAY be used by clients for resource representation negotiation.
See more details on <a href="#representation-details-negotiation">representation details negotiation</a> section.</p>
<p><h3>The <code>ETag</code> and <code>Last-Modified</code> headers</h3></p>
<p>These headers are mainly related to whether or not a returned resource may be cacheable.
Their purpose is to give clients information about the state of the requested resources.</p>
<p>According to <a href="https://tools.ietf.org/html/rfc7232#section-2.3">RFC 7232</a>,</p>
<blockquote>
<p>The “ETag” header field in a response provides the current entity-tag
for the selected representation, as determined at the conclusion of
handling the request.  An entity-tag is an opaque validator for
differentiating between multiple representations of the same
resource, regardless of whether those multiple representations are
due to resource state changes over time, content negotiation
resulting in multiple representations being valid at the same time,
or both.</p>
</blockquote>
<p>The <code>ETag</code> response HTTP header contains a string token that the server associates with a resource in order to
uniquely identify the state of that resource over its lifetime. The value of the token changes as soon as the resource changes.
An example of such header value format is:</p>
<pre><code class="language-http"><span class="hljs-attribute">ETag</span>: <span class="hljs-string">8849182c-82ad-4088-a07f-48ead4180515::openEHRSys.example.com::2</span></code></pre>
<p>Servers MAY choose their own format for this header, but the recommended value is the unique identifier of the requested resource
(e.g. VERSIONED_OBJECT.uid.value, VERSION.uid.value, EHR.ehr_id.value, etc).</p>
<p>The <code>Last-Modified</code> response HTTP header contains the datetime of the last modification of targeted resource
which should be taken from VERSION.commit_audit.time_committed.value.
An example of such header value format is:</p>
<pre><code class="language-http"><span class="hljs-attribute">Last-Modified</span>: <span class="hljs-string">Wed, 22 Jul 2009 19:15:56 GMT</span></code></pre>
<p>These two headers SHOULD be present in all responses targeting VERSION, VERSIONED_OBJECT or other resources
that have similar unique identifier.</p>
</div></div><div class="middle"><div id="design-considerations-http-status-codes" class="resource"><h3 class="resource-heading">HTTP status codes <a href="#design-considerations-http-status-codes" class="permalink">&para;</a></h3><p>To indicate the status of the request, or the executed operation, one of the HTTP status codes MUST be used, as described <a href="#header-glossary-and-conventions">above</a>.
Meaning of these codes may be further detailed (nuanced) in this specification by particular responses.
If required, other status codes MAY be used by implementations as long as their usecase is not conflicting or overlapping with above codes.</p>
<p>Status code <code>400</code> indicates a bad request or generic client-side error, used when no other <code>4xx</code> error code is appropriate.
The client SHOULD NOT repeat the request without modifications.</p>
<p>In case of errors (HTTP status codes <code>400</code>-<code>500</code>), the services MAY return more details (if <code>Prefer: return=representation</code> request header is present).
Example:</p>
<blockquote>
<p>some codes/messages <a href="https://github.com/ppazos/cabolabs-ehrserver/wiki/API-error-codes-and-messages">https://github.com/ppazos/cabolabs-ehrserver/wiki/API-error-codes-and-messages</a> and
<a href="http://veratechnas1.synology.me:13606/InstanceValidator/rules.html">http://veratechnas1.synology.me:13606/InstanceValidator/rules.html</a></p>
</blockquote>
<pre><code class="language-json">{
    "<span class="hljs-attribute">message</span>": <span class="hljs-value"><span class="hljs-string">"Error message"</span></span>,
    "<span class="hljs-attribute">code</span>": <span class="hljs-value"><span class="hljs-number">90000</span></span>,
    "<span class="hljs-attribute">errors</span>": <span class="hljs-value">[
        {
            "<span class="hljs-attribute">_type</span>": <span class="hljs-value"><span class="hljs-string">"DV_CODED_TEXT"</span></span>,
            "<span class="hljs-attribute">value</span>": <span class="hljs-value"><span class="hljs-string">"Error message"</span></span>,
            "<span class="hljs-attribute">defining_code</span>": <span class="hljs-value">{
                "<span class="hljs-attribute">terminology_id</span>": <span class="hljs-value">{
                    "<span class="hljs-attribute">value</span>": <span class="hljs-value"><span class="hljs-string">"local"</span>
                </span>}</span>,
                "<span class="hljs-attribute">code_string</span>": <span class="hljs-value"><span class="hljs-string">"9000"</span>
            </span>}
        </span>},
        {
            "<span class="hljs-attribute">_type</span>": <span class="hljs-value"><span class="hljs-string">"DV_CODED_TEXT"</span></span>,
            "<span class="hljs-attribute">value</span>": <span class="hljs-value"><span class="hljs-string">"Secondary error message"</span></span>,
            "<span class="hljs-attribute">defining_code</span>": <span class="hljs-value">{
                "<span class="hljs-attribute">terminology_id</span>": <span class="hljs-value">{
                    "<span class="hljs-attribute">value</span>": <span class="hljs-value"><span class="hljs-string">"local"</span>
                </span>}</span>,
                "<span class="hljs-attribute">code_string</span>": <span class="hljs-value"><span class="hljs-string">"8000"</span>
            </span>}
        </span>}
    ]
</span>}</code></pre>
</div></div><div class="middle"><div id="design-considerations-resources" class="resource"><h3 class="resource-heading">Resources <a href="#design-considerations-resources" class="permalink">&para;</a></h3><p>For the openEHR API, a Resource is an instance object of a specific openEHR class (type) that can be identified, addressed, handled or managed by the service.
The following are examples of openEHR resources and their types:</p>
<ul>
<li>
<p>top-level content structure types, such as COMPOSITION, EHR_STATUS, FOLDER, PARTY, etc.</p>
</li>
<li>
<p>version containers, such as VERSIONED_COMPOSITION, VERSIONED_EHR_STATUS, etc. or their containing VERSION</p>
</li>
<li>
<p>other non-versioned resources, such as EHR, CONTRIBUTION, RESULT_SET, etc.</p>
</li>
<li>
<p>definitions, such as TEMPLATE, ARCHETYPE, QUERY</p>
</li>
</ul>
<p>Types defined by openEHR specification are always capitalized when used in this specification.
For a list of all available types or a particular type definition please refer to the <a href="https://specifications.openehr.org/classes">class index</a>.</p>
<h3 id="header-resource-identification">Resource identification <a class="permalink" href="#header-resource-identification" aria-hidden="true">¶</a></h3>
<p>An important aspect of a RESTful service is to be able to address resources via URIs/URLs using HTTP verbs (methods).
Each resource has an identifier which is unique within the system for that resource type, usually consisting of at least a globally unique identifier (UUIDs).
Once the resource is persisted by the service, the identifier is assigned and will never change for that resource instance.</p>
<p>Depending on the resource type and on the use cases, there are several identifier types (and formats):</p>
<ul>
<li>
<p>a <code>versioned_object_uid</code> for identifying a VERSIONED_OBJECT</p>
</li>
<li>
<p>a <code>version_uid</code>  for identifying a VERSION from the version container</p>
</li>
<li>
<p>an <code>ehr_id</code> for identify an EHR</p>
</li>
<li>
<p>a <code>template_id</code> or a <code>qualified_query_name</code> used to identify various definitions</p>
</li>
</ul>
<p>The <code>version_uid</code> is the unique identifier of a VERSION, in the form of an {object_id, a version_tree_id, creating_system_id} triple,
where the <code>object_id</code> has the same value as the containing VERSIONED_OBJECT <code>uid</code>.</p>
<p>As examples of identifiers, the following request:</p>
<pre><code class="language-http">GET https://api.openEHRSys.example.com/v1/ehr/7d44b88c-4199-4bad-97dc-d78268e01398/composition/8849182c-82ad-4088-a07f-48ead4180515::openEHRSys.example.com::1</code></pre>
<p>is using an URI that contains an EHR identifier <code>7d44b88c-4199-4bad-97dc-d78268e01398</code>, taken from EHR.ehr_id.value,
and a COMPOSITION identifier <code>8849182c-82ad-4088-a07f-48ead4180515::openEHRSys.example.com::1</code>, taken from COMPOSITION.uid.value,
serviced by an openEHR API (of version <code>v1</code>), located at <code>https://api.openEHRSys.example.com</code></p>
<p>There are circumstances when resources can be uniquely identified by two different identifiers. For example, assuming that a VERSIONED_COMPOSITION container has the <em>versioned_object_uid</em> identifier <code>8849182c-82ad-4088-a07f-48ead4180515</code>, and the latest version is <code>5</code> (taken from <em>version_tree_id</em>), then the that COMPOSITION can be identified either by following explicit URI:</p>
<pre><code class="language-http">{baseUrl}/v1/ehr/7d44b88c-4199-4bad-97dc-d78268e01398/composition/8849182c-82ad-4088-a07f-48ead4180515::openEHRSys.example.com:5</code></pre>
<p>using the <em>version_uid</em> identifier, as well as by the following implicit URI:</p>
<pre><code class="language-http">{baseUrl}/v1/ehr/7d44b88c-4199-4bad-97dc-d78268e01398/composition/8849182c-82ad-4088-a07f-48ead4180515</code></pre>
<p>However, the former will only be valid as long there no more changes or modifications on that specific version container (i.e. the latest version remains <code>5</code>).</p>
<ul>
<li><strong>NOTE:</strong> Since <a href="https://specifications.openehr.org/releases/RM/Release-1.0.4">RM Release 1.0.4</a> it is strongly recommended that the inherited attribute <code>uid</code> be populated in COMPOSITIONs, using the UID copied from the object_id() of the <code>uid</code> field of the enclosing <code>VERSION</code> object.
For example, the ORIGINAL_VERSION.uid <code>87284370-2D4B-4e3d-A3F3-F303D2F4F34B::uk.nhs.ehr1::2</code> would be copied to the <code>uid</code> field of the COMPOSITION.
See <a href="https://specifications.openehr.org/releases/BASE/latest/architecture_overview.html#_levels_of_identification">Levels of identification</a> chapter of Architecture Overview for more details.</li>
</ul>
</div></div><div class="middle"><div id="design-considerations-data-representation" class="resource"><h3 class="resource-heading">Data representation <a href="#design-considerations-data-representation" class="permalink">&para;</a></h3><p>Services MUST support at least one of the openEHR <strong>XML</strong> or <strong>JSON</strong> formats for resource representation.
Alternative formats MAY be also supported, such as a <strong>Simplified Data Template (SDT)</strong> format.
These formats and their associated negotiation protocol is described below.</p>
<h3 id="header-xml-format">XML Format <a class="permalink" href="#header-xml-format" aria-hidden="true">¶</a></h3>
<p>When resources representation is serialized as XML, the request payload as well as the result MUST be valid against <a href="https://specifications.openehr.org/releases/ITS-XML/latest">published XSDs</a>.</p>
<p>A client MAY use the header <code>Content-Type: application/xml</code> in the requests to specify the XML payload format.
If the service cannot process the request payload as XML format is not supported, it MUST respond with HTTP status code<code>415 Unsupported Media Type</code>.</p>
<p>The client SHOULD use the <code>Accept: application/xml</code> request header in order to specify the expected XML response format.
If the service cannot fulfill this aspect of the request, it MUST respond with HTTP status code <code>406 Not Acceptable</code>.
Proper header <code>Content-Type: application/xml</code> MUST be present in the response of the service
unless the response has no content body (HTTP status code <code>204</code>).</p>
<h3 id="header-json-format">JSON Format <a class="permalink" href="#header-json-format" aria-hidden="true">¶</a></h3>
<p>When resources representation is serialized as JSON, the request payload as well as the result SHOULD be valid against <a href="https://specifications.openehr.org/releases/ITS-JSON/latest">published JSON-Schemas</a>.</p>
<blockquote>
<p>Note: The JSON-Schema project is under development.</p>
</blockquote>
<p>Attribute names must be lowercase <em>snake_case</em> names as specified in the equivalent RM type. For example:</p>
<pre><code class="language-json">{
    "<span class="hljs-attribute">category</span>": <span class="hljs-value">{
        "<span class="hljs-attribute">value</span>": <span class="hljs-value"><span class="hljs-string">"event"</span></span>,
        "<span class="hljs-attribute">defining_code</span>": <span class="hljs-value">{
            "<span class="hljs-attribute">terminology_id</span>": <span class="hljs-value">{
                "<span class="hljs-attribute">value</span>": <span class="hljs-value"><span class="hljs-string">"openehr"</span>
            </span>}</span>,
            "<span class="hljs-attribute">code_string</span>": <span class="hljs-value"><span class="hljs-string">"433"</span>
        </span>}
    </span>}
</span>}</code></pre>
<p>Metadata attributes (those that are not also RM attributes) will always be prefixed by a <code>'_'</code>.</p>
<p>One example is the <code>_type</code> attribute, which should be used to specify the RM type whenever polymorphism
is involved, or when the underlying definition in RM type is abstract
(dynamic type is different from the static type).
This follows same rule as for XML typing.
The value of this attribute MUST be the uppercase class name from the RM specification. For example:</p>
<pre><code class="language-json">{
    "<span class="hljs-attribute">_type</span>": <span class="hljs-value"><span class="hljs-string">"DV_TEXT"</span></span>,
    "<span class="hljs-attribute">value</span>": <span class="hljs-value"><span class="hljs-string">"Hello world!"</span>
</span>}</code></pre>
<p>The RM attributes (even required ones) that are <code>Null</code>, empty list or empty arrays SHOULD be absent when serialized as JSON.</p>
<p>The order of attributes in the resource MAY follow the order of attributes in the RM specification of the type of the resource, but this is not mandatory.</p>
<p>A client MAY use the header <code>Content-Type: application/json</code> in the requests to specify the JSON payload format.
If the service cannot process the request payload as JSON format is not supported, it MUST respond with HTTP status code <code>415 Unsupported Media Type</code>.</p>
<p>The client SHOULD use the <code>Accept: application/json</code> request header in order to specify the expected JSON response format.
If the service cannot fulfill this aspect of the request, it MUST respond with HTTP status code <code>406 Not Acceptable</code>.
Proper header <code>Content-Type: application/json</code> MUST be present in the response of the service
unless the response has no content body (HTTP status code <code>204</code>).</p>
<h3 id="header-alternative-data-formats">Alternative data formats <a class="permalink" href="#header-alternative-data-formats" aria-hidden="true">¶</a></h3>
<p>Creating data instances according to canonical XML or JSON format is not always straightforward,
particularly for developers with minimal exposure to openEHR, and various alternatives
have been used in the past to simplify the job of content creation and committal for application developers.</p>
<p>There is an initiative exploring and documenting these alternative formats, which specifications can be consulted at
<a href="simplified_data_template.html">Simplified Data Template (SDT)</a> page.</p>
<blockquote>
<p>Note: The specification of Simplified Data Template is under development.</p>
</blockquote>
<p>In order to use these formats, content negotiation SHOULD be done in the same manner as for the canonical XML or JSON format above,
but instead of <code>application/xml</code> or <code>application/json</code>, clients and servers MUST use:</p>
<ul>
<li>
<p><code>application/openehr.nc.flat+json</code> for near-canonical RM Simplified Data Template (ncSDT) as JSON, based on the
<a href="https://github.com/ethercis/ethercis/blob/master/doc/flat%20json.md">ECISFLAT format</a>, originally devised for the EtherCIS project,</p>
</li>
<li>
<p><code>application/openehr.wt.flat+json</code> for the simplified IM Simplified Data Template (simSDT) as JSON,
based on the ‘FLAT’ version of the <a href="https://www.ehrscape.com/reference.html">‘web template’ format</a>, originally created by Marand for the Better platform.
More information can be found also in their <a href="https://www.ehrscape.com/examples.html">‘examples’</a> page, as well in their <a href="https://github.com/better-care">tests on GitHub</a>.</p>
<p>EHRbase also has support for this format, and provides information in their <a href="https://ehrbase.readthedocs.io/en/latest/02_getting_started/05_load_data/index.html#flat-format">documentation</a>.</p>
</li>
<li>
<p><code>application/openehr.wt.structured+json</code> for the structured IM Simplified Data Template (structSDT) as JSON,
based on the ‘STRUCTURED’ version of the <a href="https://www.ehrscape.com/reference.html">‘web template’ format</a> originally created by Marand for the Better platform
(see also their <a href="https://www.ehrscape.com/examples.html">‘examples’</a>).</p>
</li>
<li>
<p><code>application/openehr.tds2+xml</code> for TDS simplification of RM as XML,
based on the ‘TDS/TDD’ format originally created by <a href="http://oceanhealthsystems.com/">Ocean Health Systems</a>
(see <a href="https://openehr.atlassian.net/wiki/spaces/spec/pages/30408770/Template+Data+Schema+TDS+Specification+and+associated+Template+Data+Document+TDD">this wiki page</a>
and the <a href="https://github.com/openEHR/openEHR-TDD2canonical">TDD2canonical</a> project).</p>
</li>
</ul>
<blockquote>
<p>Note: Other alternative formats may be added in the future, depending on innovative impact, simplicity, popular demand or adoption rate.
Current alternative formats might not be supported once they become obsolete or superseded by newer formats.</p>
</blockquote>
<p>A client MAY use the header <code>Content-Type</code> in the requests to specify the simplified payload format.
If the service cannot process the request payload as the simplified format is not supported, it MUST respond with HTTP status code<code>415 Unsupported Media Type</code>.</p>
<p>The client SHOULD use the <code>Accept</code> request header in order to specify the expected simplified response format.
If the service cannot fulfill this aspect of the request, it MUST respond with HTTP status code <code>406 Not Acceptable</code>.
Proper header <code>Content-Type</code> MUST be present in the response of the service
unless the response has no content body (HTTP status code <code>204</code>).</p>
<h3 id="header-datetime-format">Datetime format <a class="permalink" href="#header-datetime-format" aria-hidden="true">¶</a></h3>
<p>The format of the date, time and datetime types should comply with the <a href="https://en.wikipedia.org/wiki/ISO_8601">ISO 8601 Date and Time</a> format specification.
The ISO 8601 semantics assumed by openEHR is defined in the classes of the <a href="https://specifications.openehr.org/releases/BASE/latest/foundation_types.html#_time_types">base.foundation_types.time package</a>.
It is strongly recommended using the <em>extended</em> format for dates, times and datetimes.
This greatly aids human readability, and reduces the need for special date/time parsing and formatting.</p>
<p>HTTP query parameters and path segments that are dates, datetimes, or times, MUST always use the <em>extended</em> ISO 8601 format.
The general form of a datetime is <code>YYYY-MM-DDThh:mm:ss.sss[Z|±hh:mm]</code>, e.g. <code>2016-06-23T13:42:16.117+02:00</code>.<br>
Timezone SHOULD be only supplied when needed, otherwise the local timezone is assumed.</p>
<p>Any date, datetime or time value provided as part of the HTTP message body, when creating or updating a resource (e.g. a DV_DATE_TIME value inside the COMPOSITION content),
will be preserved as it was sent by the client, and passed to the underlying backend engine as is.
Retrieval or querying those resources SHOULD return date, datetime, or time values in the (original) format provided by underlying backend engine, avoiding any format change.</p>
</div></div><div class="middle"><div id="design-considerations-representation-details-negotiation" class="resource"><h3 class="resource-heading">Representation details negotiation <a href="#design-considerations-representation-details-negotiation" class="permalink">&para;</a></h3><p>When using the HTTP methods to create or update a resource, the service SHOULD give clients the option of returning either a complete
representation of the (modified) resource, or a minimal or no content in the payload response (assuming the operation was successfully completed).
See <a href="https://tools.ietf.org/html/rfc7240#section-4.2">RFC 7240</a> for more details on how achieve this using <code>Prefer</code> header.
The client MAY choose any of the following:</p>
<ul>
<li>
<p>send <code>Prefer: return=minimal</code> to inform the service that prefers only a minimal response to a successful request.
A <code>Location</code> header indicating the direct URL to access the resource MUST be part of the service response.
If there is no payload content to be returned, the service SHOULD use HTTP status code <code>204 No Content</code>.</p>
</li>
<li>
<p>send <code>Prefer: return=representation</code> to inform the service that prefers a full representation response to a successful request.
A <code>Location</code> header indicating the direct URL to access the resource MAY be part of the service response,
and the payload content SHOULD include a full representation.</p>
</li>
</ul>
<p>In case no <code>Prefer</code> header is present in request, the default response policy is <code>return=minimal</code>.</p>
<p>Another preference is related to following and resolving OBJ_REF identifiers. Under some circumstances a client
MAY indicate that prefers response containing full or partial resource representation instead of references to resources using OBJ_REF.
A typical case is a list of COMPOSITIONs part of an EHR, which, strictly following RM specification, should always return
list of OBJ_REF, but sometimes clients prefers to get COMPOSITIONs.
Services that have this capability implemented SHOULD accept and honor <code>Prefer: resolve_refs</code> request header.</p>
<pre><code class="language-http"><span class="hljs-attribute">Prefer</span>: <span class="hljs-string">return=representation, resolve_refs</span></code></pre>
</div></div><div class="middle"><p style="text-align: center;" class="text-muted">Generated with&nbsp;<a href="https://github.com/danielgtaylor/aglio" class="aglio">aglio</a>&nbsp;on 15 Mar 2021</p></div></div></div></div><script>/* eslint-env browser */
/* eslint quotes: [2, "single"] */
'use strict';

/*
  Determine if a string ends with another string.
*/
function endsWith(str, suffix) {
    return str.indexOf(suffix, str.length - suffix.length) !== -1;
}

/*
  Get a list of direct child elements by class name.
*/
function childrenByClass(element, name) {
  var filtered = [];

  for (var i = 0; i < element.children.length; i++) {
    var child = element.children[i];
    var classNames = child.className.split(' ');
    if (classNames.indexOf(name) !== -1) {
      filtered.push(child);
    }
  }

  return filtered;
}

/*
  Get an array [width, height] of the window.
*/
function getWindowDimensions() {
  var w = window,
      d = document,
      e = d.documentElement,
      g = d.body,
      x = w.innerWidth || e.clientWidth || g.clientWidth,
      y = w.innerHeight || e.clientHeight || g.clientHeight;

  return [x, y];
}

/*
  Collapse or show a request/response example.
*/
function toggleCollapseButton(event) {
    var button = event.target.parentNode;
    var content = button.parentNode.nextSibling;
    var inner = content.children[0];

    if (button.className.indexOf('collapse-button') === -1) {
      // Clicked without hitting the right element?
      return;
    }

    if (content.style.maxHeight && content.style.maxHeight !== '0px') {
        // Currently showing, so let's hide it
        button.className = 'collapse-button';
        content.style.maxHeight = '0px';
    } else {
        // Currently hidden, so let's show it
        button.className = 'collapse-button show';
        content.style.maxHeight = inner.offsetHeight + 12 + 'px';
    }
}

function toggleTabButton(event) {
    var i, index;
    var button = event.target;

    // Get index of the current button.
    var buttons = childrenByClass(button.parentNode, 'tab-button');
    for (i = 0; i < buttons.length; i++) {
        if (buttons[i] === button) {
            index = i;
            button.className = 'tab-button active';
        } else {
            buttons[i].className = 'tab-button';
        }
    }

    // Hide other tabs and show this one.
    var tabs = childrenByClass(button.parentNode.parentNode, 'tab');
    for (i = 0; i < tabs.length; i++) {
        if (i === index) {
            tabs[i].style.display = 'block';
        } else {
            tabs[i].style.display = 'none';
        }
    }
}

/*
  Collapse or show a navigation menu. It will not be hidden unless it
  is currently selected or `force` has been passed.
*/
function toggleCollapseNav(event, force) {
    var heading = event.target.parentNode;
    var content = heading.nextSibling;
    var inner = content.children[0];

    if (heading.className.indexOf('heading') === -1) {
      // Clicked without hitting the right element?
      return;
    }

    if (content.style.maxHeight && content.style.maxHeight !== '0px') {
      // Currently showing, so let's hide it, but only if this nav item
      // is already selected. This prevents newly selected items from
      // collapsing in an annoying fashion.
      if (force || window.location.hash && endsWith(event.target.href, window.location.hash)) {
        content.style.maxHeight = '0px';
      }
    } else {
      // Currently hidden, so let's show it
      content.style.maxHeight = inner.offsetHeight + 12 + 'px';
    }
}

/*
  Refresh the page after a live update from the server. This only
  works in live preview mode (using the `--server` parameter).
*/
function refresh(body) {
    document.querySelector('body').className = 'preload';
    document.body.innerHTML = body;

    // Re-initialize the page
    init();
    autoCollapse();

    document.querySelector('body').className = '';
}

/*
  Determine which navigation items should be auto-collapsed to show as many
  as possible on the screen, based on the current window height. This also
  collapses them.
*/
function autoCollapse() {
  var windowHeight = getWindowDimensions()[1];
  var itemsHeight = 64; /* Account for some padding */
  var itemsArray = Array.prototype.slice.call(
    document.querySelectorAll('nav .resource-group .heading'));

  // Get the total height of the navigation items
  itemsArray.forEach(function (item) {
    itemsHeight += item.parentNode.offsetHeight;
  });

  // Should we auto-collapse any nav items? Try to find the smallest item
  // that can be collapsed to show all items on the screen. If not possible,
  // then collapse the largest item and do it again. First, sort the items
  // by height from smallest to largest.
  var sortedItems = itemsArray.sort(function (a, b) {
    return a.parentNode.offsetHeight - b.parentNode.offsetHeight;
  });

  while (sortedItems.length && itemsHeight > windowHeight) {
    for (var i = 0; i < sortedItems.length; i++) {
      // Will collapsing this item help?
      var itemHeight = sortedItems[i].nextSibling.offsetHeight;
      if ((itemsHeight - itemHeight <= windowHeight) || i === sortedItems.length - 1) {
        // It will, so let's collapse it, remove its content height from
        // our total and then remove it from our list of candidates
        // that can be collapsed.
        itemsHeight -= itemHeight;
        toggleCollapseNav({target: sortedItems[i].children[0]}, true);
        sortedItems.splice(i, 1);
        break;
      }
    }
  }
}

/*
  Initialize the interactive functionality of the page.
*/
function init() {
    var i, j;

    // Make collapse buttons clickable
    var buttons = document.querySelectorAll('.collapse-button');
    for (i = 0; i < buttons.length; i++) {
        buttons[i].onclick = toggleCollapseButton;

        // Show by default? Then toggle now.
        if (buttons[i].className.indexOf('show') !== -1) {
            toggleCollapseButton({target: buttons[i].children[0]});
        }
    }

    var responseCodes = document.querySelectorAll('.example-names');
    for (i = 0; i < responseCodes.length; i++) {
        var tabButtons = childrenByClass(responseCodes[i], 'tab-button');
        for (j = 0; j < tabButtons.length; j++) {
            tabButtons[j].onclick = toggleTabButton;

            // Show by default?
            if (j === 0) {
                toggleTabButton({target: tabButtons[j]});
            }
        }
    }

    // Make nav items clickable to collapse/expand their content.
    var navItems = document.querySelectorAll('nav .resource-group .heading');
    for (i = 0; i < navItems.length; i++) {
        navItems[i].onclick = toggleCollapseNav;

        // Show all by default
        toggleCollapseNav({target: navItems[i].children[0]});
    }
}

// Initial call to set up buttons
init();

window.onload = function () {
    autoCollapse();
    // Remove the `preload` class to enable animations
    document.querySelector('body').className = '';
    if(window.location.hash) {
        var elmnt = document.getElementById(window.location.hash.substring(1));
        elmnt.scrollIntoView(true);
    }
};
</script></body></html>