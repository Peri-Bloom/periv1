<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<meta http-equiv="X-UA-Compatible" content="IE=edge">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<meta name="generator" content="Asciidoctor 2.0.20">
<meta name="description" content="openEHR SMART App Launch and Service Discovery Framework">
<meta name="keywords" content="JSON, REST, SMART, OAuth2, OIDC, Authentication, Authorization">
<title>SMART App Launch</title>
<link rel="stylesheet" href="https://specifications.openehr.org/styles/openehr.css">
<link rel="stylesheet" href="https://specifications.openehr.org/styles/pygments-default.css">
</head>
<body class="book toc2 toc-left">
<div id="header">
<div id="toc" class="toc2">
<div id="toctitle">Table of Contents</div>
<ul class="sectlevel0">
<li><a href="#_smart_app_launch">SMART App Launch</a>
<ul class="sectlevel1">
<li><a href="#_amendment_record">Amendment Record</a></li>
<li><a href="#_acknowledgements">Acknowledgements</a>
<ul class="sectlevel2">
<li><a href="#_primary_author">Primary Author</a></li>
<li><a href="#_contributors">Contributors</a></li>
<li><a href="#_trademarks">Trademarks</a></li>
</ul>
</li>
<li><a href="#_preface">1. Preface</a>
<ul class="sectlevel2">
<li><a href="#_purpose">1.1. Purpose</a></li>
<li><a href="#_status">1.2. Status</a></li>
<li><a href="#_feedback">1.3. Feedback</a></li>
<li><a href="#_conformance">1.4. Conformance</a></li>
</ul>
</li>
<li><a href="#_overview">2. Overview</a>
<ul class="sectlevel2">
<li><a href="#_requirements">2.1. Requirements</a></li>
</ul>
</li>
<li><a href="#_conceptual_approach">3. Conceptual Approach</a>
<ul class="sectlevel2">
<li><a href="#_background">3.1. Background</a></li>
<li><a href="#_glossary">3.2. Glossary</a></li>
</ul>
</li>
<li><a href="#_service_discovery">4. Service Discovery</a>
<ul class="sectlevel2">
<li><a href="#_background_2">4.1. Background</a></li>
<li><a href="#_authentication_endpoints">4.2. Authentication endpoints</a></li>
<li><a href="#_services">4.3. Services</a></li>
<li><a href="#_capabilities">4.4. Capabilities</a></li>
</ul>
</li>
<li><a href="#_authentication_authorization_and_scopes">5. Authentication, Authorization and Scopes</a></li>
<li><a href="#_context_selection">6. Context Selection</a></li>
<li><a href="#_launch_protocol">7. Launch Protocol</a></li>
</ul>
</li>
</ul>
</div>
</div>
<div id="content">
<div id="preamble">
<div class="sectionbody">
<div class="imageblock text-center">
<div class="content">
<img src="https://specifications.openehr.org/images/openEHR_logo_RGB.svg" alt="openEHR logo">
</div>
</div>
</div>
</div>
<h1 id="_smart_app_launch" class="sect0"><a class="anchor" href="#_smart_app_launch"></a>SMART App Launch</h1>
<div class="openblock partintro">
<div class="content">
<table class="tableblock frame-all grid-all fit-content spread">
<colgroup>
<col>
<col>
</colgroup>
<thead>
<tr>
<th class="tableblock halign-center valign-top" colspan="2"><strong>Issuer</strong>: <a href="https://www.openehr.org/programs/specification" target="_blank" rel="noopener">openEHR Specification Program</a></th>
</tr>
</thead>
<tbody>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><strong>Release</strong>: ITS-REST latest</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><strong>Status</strong>: DEVELOPMENT</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><strong>Revision</strong>: <a href="#latest_issue">[latest_issue]</a></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><strong>Date</strong>: <a href="#latest_issue_date">[latest_issue_date]</a></p></td>
</tr>
<tr>
<td class="tableblock halign-center valign-top" colspan="2"><p class="tableblock"><strong>Keywords</strong>: JSON, REST, SMART, OAuth2, OIDC, Authentication, Authorization</p></td>
</tr>
</tbody>
</table>
<div class="imageblock text-center">
<div class="content">
<object type="image/svg+xml" data="openehr_block_diagram.svg" width="60%"><span class="alt">openEHR components</span></object>
</div>
</div>
<table class="tableblock frame-all grid-all stretch">
<colgroup>
<col style="width: 20%;">
<col style="width: 80%;">
</colgroup>
<thead>
<tr>
<th class="tableblock halign-center valign-top" colspan="2">&#169; 2023 - 2023 The openEHR Foundation</th>
</tr>
</thead>
<tbody>
<tr>
<td class="tableblock halign-center valign-top" colspan="2"><p class="tableblock"><a href="https://www.openehr.org" target="_blank" rel="noopener">The openEHR Foundation</a> is an independent, non-profit foundation, facilitating the sharing of health records by consumers and clinicians via open specifications, clinical models and open platform implementations.</p></td>
</tr>
<tr>
<td class="tableblock halign-center valign-top"><p class="tableblock"><strong>Licence</strong></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><span class="image"><img src="https://specifications.openehr.org/images/cc-by-nd-88x31.png" alt="image"></span> Creative Commons Attribution-NoDerivs 3.0 Unported. <a href="https://creativecommons.org/licenses/by-nd/3.0/" class="bare">https://creativecommons.org/licenses/by-nd/3.0/</a></p></td>
</tr>
<tr>
<td class="tableblock halign-center valign-top"><p class="tableblock"><strong>Support</strong></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Issues: <a href="https://specifications.openehr.org/components/ITS-REST/open_issues" target="_blank" rel="noopener">Problem Reports</a><br>
 Web: <a href="https://specifications.openehr.org" target="_blank" rel="noopener">specifications.openEHR.org</a></p></td>
</tr>
</tbody>
</table>
</div>
</div>
<div class="sect1">
<h2 id="_amendment_record"><a class="anchor" href="#_amendment_record"></a>Amendment Record</h2>
<div class="sectionbody">
<table class="tableblock frame-all grid-all stretch">
<colgroup>
<col style="width: 9.0909%;">
<col style="width: 54.5454%;">
<col style="width: 18.1818%;">
<col style="width: 18.1819%;">
</colgroup>
<thead>
<tr>
<th class="tableblock halign-left valign-top">Issue</th>
<th class="tableblock halign-left valign-top">Details</th>
<th class="tableblock halign-left valign-top">Raiser</th>
<th class="tableblock halign-left valign-top">Completed</th>
</tr>
</thead>
</table>
</div>
</div>
<div class="sect1">
<h2 id="_acknowledgements"><a class="anchor" href="#_acknowledgements"></a>Acknowledgements</h2>
<div class="sectionbody">
<div class="sect2">
<h3 id="_primary_author"><a class="anchor" href="#_primary_author"></a>Primary Author</h3>
<div class="ulist">
<ul>
<li>
<p>Sidharth Ramesh; openEHR Foundation Management Board.</p>
</li>
<li>
<p>Sebastian Iancu; Code24</p>
</li>
</ul>
</div>
</div>
<div class="sect2">
<h3 id="_contributors"><a class="anchor" href="#_contributors"></a>Contributors</h3>
<div class="paragraph">
<p>This specification has benefited from formal and informal input from the openEHR and wider health informatics community. The openEHR Foundation would like to recognise the following for their contributions.</p>
</div>
<div class="ulist">
<ul>
<li>
<p>Ian McNicoll MD, FreshEHR, UK</p>
</li>
<li>
<p>Bostjan Lah, Senior Architect, Better, Slovenia</p>
</li>
</ul>
</div>
<div class="paragraph">
<p>A significant part of the design ideas and content of this specification was adapted from:</p>
</div>
<div class="ulist">
<ul>
<li>
<p>the SMART on FHIR protocol described by HL7 FHIR</p>
</li>
<li>
<p>the EtherCIS ECISFLAT format by the EtherCIS community;</p>
</li>
<li>
<p>the XSD-based Template Data Schema (TDS) format developed by Ocean Health Systems.</p>
</li>
</ul>
</div>
</div>
<div class="sect2">
<h3 id="_trademarks"><a class="anchor" href="#_trademarks"></a>Trademarks</h3>
<div class="ulist">
<ul>
<li>
<p>'openEHR' is a registered trademark of the openEHR Foundation</p>
</li>
<li>
<p>'OMG' and 'UML' are registered trademarks of the Object Management Group</p>
</li>
<li>
<p>'FHIR' is a registered trademark of the Health Level Seven International</p>
</li>
</ul>
</div>
</div>
</div>
</div>
<div class="sect1">
<h2 id="_preface"><a class="anchor" href="#_preface"></a>1. Preface</h2>
<div class="sectionbody">
<div class="sect2">
<h3 id="_purpose"><a class="anchor" href="#_purpose"></a>1.1. Purpose</h3>
<div class="paragraph">
<p>This document describes SMART on openEHR.</p>
</div>
</div>
<div class="sect2">
<h3 id="_status"><a class="anchor" href="#_status"></a>1.2. Status</h3>
<div class="paragraph">
<p>This specification is in the DEVELOPMENT state. The development version of this document can be found at <a href="https://specifications.openehr.org/releases/ITS-REST/latest/simplified_data_template.html" target="_blank" rel="noopener">https://specifications.openehr.org/releases/ITS-REST/latest/simplified_data_template.html</a>.</p>
</div>
<div class="paragraph">
<p>Known omissions or questions are indicated in the text with a 'to be determined' paragraph, as follows:</p>
</div>
<div class="paragraph tbd">
<p><strong>TBD</strong>: (example To Be Determined paragraph)</p>
</div>
</div>
<div class="sect2">
<h3 id="_feedback"><a class="anchor" href="#_feedback"></a>1.3. Feedback</h3>
<div class="paragraph">
<p>Feedback may be provided on the <a href="https://discourse.openehr.org/c/specifications/its" target="_blank" rel="noopener">openEHR ITS forum</a>.</p>
</div>
<div class="paragraph">
<p>Issues may be raised on the <a href="https://specifications.openehr.org/components/ITS-REST/open_issues" target="_blank" rel="noopener">specifications Problem Report tracker</a>.</p>
</div>
<div class="paragraph">
<p>To see changes made due to previously reported issues, see the <a href="https://specifications.openehr.org/components/ITS-REST/history" target="_blank" rel="noopener">ITS-REST component Change Request tracker</a>.</p>
</div>
</div>
<div class="sect2">
<h3 id="_conformance"><a class="anchor" href="#_conformance"></a>1.4. Conformance</h3>
<div class="paragraph">
<p>When used with openEHR-REST API, the Authorization and Authentication of applications should be through the SMART protocol.</p>
</div>
<div class="paragraph tbd">
<p><strong>TBD</strong>: Conformance testing will be further described later.</p>
</div>
</div>
</div>
</div>
<div class="sect1">
<h2 id="_overview"><a class="anchor" href="#_overview"></a>2. Overview</h2>
<div class="sectionbody">
<div class="sect2">
<h3 id="_requirements"><a class="anchor" href="#_requirements"></a>2.1. Requirements</h3>
<div class="paragraph">
<p>The openEHR Reference Model and REST APIs provide a foundation for interoperable applications. For applications to be truly portable between vendors, there is a requirement for uniform authentication, authorization.</p>
</div>
<div class="paragraph">
<p>Many applications also function in the context of a single EHR (or Patient) or an Episode (or Encounter) and “context selection” and “launches” become essential.</p>
</div>
<div class="paragraph">
<p>The SMART on openEHR specification is meant to provide this framework for:</p>
</div>
<div class="ulist">
<ul>
<li>
<p>Service Discovery</p>
</li>
<li>
<p>Authentication and Authorization</p>
</li>
<li>
<p>Launching apps from an EHR "Launcher"</p>
</li>
</ul>
</div>
</div>
</div>
</div>
<div class="sect1">
<h2 id="_conceptual_approach"><a class="anchor" href="#_conceptual_approach"></a>3. Conceptual Approach</h2>
<div class="sectionbody">
<div class="sect2">
<h3 id="_background"><a class="anchor" href="#_background"></a>3.1. Background</h3>
<div class="paragraph">
<p>SMART stands for “Substitutable Medical Applications and Reusable Technologies” and was initially proposed as SMART on FHIR (<a href="https://pubmed.ncbi.nlm.nih.gov/26911829/" class="bare">https://pubmed.ncbi.nlm.nih.gov/26911829/</a>). It provides a good starting point for this specification as it builds on OAuth2 and OIDC which are industry standards for authentication and authorization. This specification aims to be fully backward compatible with SMART on FHIR while making this protocol work for vendors utilizing openEHR, FHIR REST APIs, or both.</p>
</div>
</div>
<div class="sect2">
<h3 id="_glossary"><a class="anchor" href="#_glossary"></a>3.2. Glossary</h3>
<div class="ulist">
<ul>
<li>
<p>Application - Software developed by the vendor or an external entity designed to work with the CDR and/or Launcher built by the vendor.</p>
</li>
<li>
<p>Vendor - An entity that provides an openEHR CDR and/or Launchers as a service to end users.</p>
</li>
<li>
<p>openEHR CDR - An openEHR Clinical Data Repository that provides a REST API conformant to the openEHR REST API specification.</p>
</li>
<li>
<p>FHIR CDR - A FHIR server that provides an FHIR REST API conformant with the FHIR specification.</p>
</li>
<li>
<p>OAuth2 Server - An authentication server that provides APIs consistent with the OAuth2 specification and will be extended to the SMART protocol that will be described in this document</p>
</li>
<li>
<p>Launcher - Software built by the vendor that serves to launch other applications within the user being a patient or practitioner. This could be the “EHR” that provides other functionality, but could also a separate application.</p>
</li>
</ul>
</div>
</div>
</div>
</div>
<div class="sect1">
<h2 id="_service_discovery"><a class="anchor" href="#_service_discovery"></a>4. Service Discovery</h2>
<div class="sectionbody">
<div class="sect2">
<h3 id="_background_2"><a class="anchor" href="#_background_2"></a>4.1. Background</h3>
<div class="paragraph">
<p>The process of authentication and accessing a vendor’s APIs usually has multiple endpoints of interest. Some of these can include the OAuth2’s well-known endpoints like Token and Authentication endpoints. The application may also be interested in other APIs like the openEHR REST API, vendor’s proprietary APIs, DICOMWeb APIs, FHIR APIs to name a few.</p>
</div>
<div class="paragraph">
<p>The SMART Service Discovery builds on the .well-known/smart-configuration as per SMART on FHIR and enables a vendor to advertise multiple services alongside the well-known OAuth2 endpoints for authentication.</p>
</div>
<div class="paragraph">
<p>Given a vendor’s base URL of <a href="https://ehr.example.com" class="bare">https://ehr.example.com</a>, the SMART Configuration well-known endpoint should be available at <a href="https://ehr.example.com/.well-known/smart-configuration" class="bare">https://ehr.example.com/.well-known/smart-configuration</a>.</p>
</div>
<div class="paragraph">
<p>Note: The vendor can choose to make <a href="https://ehr.example.com" class="bare">https://ehr.example.com</a> the base URL of their FHIR endpoint if they want to maintain backward compatibility for SMART on FHIR application, since these apps assume the vendor’s base URL is always the FHIR server.</p>
</div>
<div class="paragraph">
<p>An example of a response from /.well-known/smart-configuration will look like this:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="pygments highlight"><code data-lang="json"><span></span><span class="tok-p">{</span>
<span class="tok-w">  </span><span class="tok-nt">&quot;issuer&quot;</span><span class="tok-p">:</span><span class="tok-w"> </span><span class="tok-s2">&quot;https://ehr.example.com&quot;</span><span class="tok-p">,</span>
<span class="tok-w">  </span><span class="tok-nt">&quot;jwks_uri&quot;</span><span class="tok-p">:</span><span class="tok-w"> </span><span class="tok-s2">&quot;https://ehr.example.com/.well-known/jwks.json&quot;</span><span class="tok-p">,</span>
<span class="tok-w">  </span><span class="tok-nt">&quot;authorization_endpoint&quot;</span><span class="tok-p">:</span><span class="tok-w"> </span><span class="tok-s2">&quot;https://ehr.example.com/auth/authorize&quot;</span><span class="tok-p">,</span>
<span class="tok-w">  </span><span class="tok-nt">&quot;token_endpoint&quot;</span><span class="tok-p">:</span><span class="tok-w"> </span><span class="tok-s2">&quot;https://ehr.example.com/auth/token&quot;</span><span class="tok-p">,</span>
<span class="tok-w">  </span><span class="tok-nt">&quot;services&quot;</span><span class="tok-p">:</span><span class="tok-w"> </span><span class="tok-p">{</span>
<span class="tok-w">    </span><span class="tok-nt">&quot;openehr&quot;</span><span class="tok-w"> </span><span class="tok-p">:</span><span class="tok-w"> </span><span class="tok-p">{</span>
<span class="tok-w">      </span><span class="tok-nt">&quot;baseUrl&quot;</span><span class="tok-p">:</span><span class="tok-s2">&quot;https://ehr.example.com/openehr/rest&quot;</span><span class="tok-p">,</span>
<span class="tok-w">	    </span><span class="tok-nt">&quot;description&quot;</span><span class="tok-p">:</span><span class="tok-w"> </span><span class="tok-s2">&quot;The openEHR official API baseUrl&quot;</span><span class="tok-p">,</span>
<span class="tok-w">      </span><span class="tok-nt">&quot;documentation&quot;</span><span class="tok-p">:</span><span class="tok-w"> </span><span class="tok-s2">&quot;https://example.com/openehr/docs&quot;</span><span class="tok-p">,</span>
<span class="tok-w">      </span><span class="tok-nt">&quot;openapi&quot;</span><span class="tok-p">:</span><span class="tok-w"> </span><span class="tok-s2">&quot;https://example.com/openehr/openapi.json&quot;</span>
<span class="tok-w">    </span><span class="tok-p">},</span>
<span class="tok-w">    </span><span class="tok-nt">&quot;fhir&quot;</span><span class="tok-w"> </span><span class="tok-p">:</span><span class="tok-w"> </span><span class="tok-p">{</span>
<span class="tok-w">      </span><span class="tok-nt">&quot;baseUrl&quot;</span><span class="tok-p">:</span><span class="tok-s2">&quot;https://ehr.example.com/&quot;</span><span class="tok-p">,</span>
<span class="tok-w">	    </span><span class="tok-nt">&quot;description&quot;</span><span class="tok-p">:</span><span class="tok-w"> </span><span class="tok-s2">&quot;The FHIR API baseUrl&quot;</span><span class="tok-p">,</span>
<span class="tok-w">    </span><span class="tok-p">},</span>
<span class="tok-w">    </span><span class="tok-nt">&quot;org.medblocks.s3&quot;</span><span class="tok-p">:</span><span class="tok-w"> </span><span class="tok-p">{</span>
<span class="tok-w">      </span><span class="tok-nt">&quot;baseUrl&quot;</span><span class="tok-p">:</span><span class="tok-s2">&quot;https://s3.example.com/storage&quot;</span><span class="tok-p">,</span>
<span class="tok-w">      </span><span class="tok-nt">&quot;documentation&quot;</span><span class="tok-p">:</span><span class="tok-w"> </span><span class="tok-s2">&quot;https://example.com/s3/docs&quot;</span><span class="tok-p">,</span>
<span class="tok-w">      </span><span class="tok-nt">&quot;openapi&quot;</span><span class="tok-p">:</span><span class="tok-w"> </span><span class="tok-s2">&quot;https://example.com/s3/openapi.json&quot;</span>
<span class="tok-w">    </span><span class="tok-p">},</span>
<span class="tok-w">    </span><span class="tok-nt">&quot;nl.code24.demographics&quot;</span><span class="tok-p">:</span><span class="tok-w"> </span><span class="tok-p">{</span>
<span class="tok-w">      </span><span class="tok-nt">&quot;baseUrl&quot;</span><span class="tok-p">:</span><span class="tok-s2">&quot;https://demographics.example.com/demographics&quot;</span>
<span class="tok-w">    </span><span class="tok-p">}</span>
<span class="tok-w">  </span><span class="tok-p">},</span>
<span class="tok-w">  </span><span class="tok-nt">&quot;token_endpoint_auth_methods_supported&quot;</span><span class="tok-p">:</span><span class="tok-w"> </span><span class="tok-p">[</span>
<span class="tok-w">    </span><span class="tok-s2">&quot;client_secret_basic&quot;</span><span class="tok-p">,</span>
<span class="tok-w">    </span><span class="tok-s2">&quot;private_key_jwt&quot;</span>
<span class="tok-w">  </span><span class="tok-p">],</span>
<span class="tok-w">  </span><span class="tok-nt">&quot;grant_types_supported&quot;</span><span class="tok-p">:</span><span class="tok-w"> </span><span class="tok-p">[</span>
<span class="tok-w">    </span><span class="tok-s2">&quot;authorization_code&quot;</span><span class="tok-p">,</span>
<span class="tok-w">    </span><span class="tok-s2">&quot;client_credentials&quot;</span>
<span class="tok-w">  </span><span class="tok-p">],</span>
<span class="tok-w">  </span><span class="tok-nt">&quot;registration_endpoint&quot;</span><span class="tok-p">:</span><span class="tok-w"> </span><span class="tok-s2">&quot;https://ehr.example.com/auth/register&quot;</span><span class="tok-p">,</span>
<span class="tok-w">  </span><span class="tok-nt">&quot;scopes_supported&quot;</span><span class="tok-p">:</span><span class="tok-w"> </span><span class="tok-p">[</span><span class="tok-s2">&quot;openid&quot;</span><span class="tok-p">,</span><span class="tok-w"> </span><span class="tok-s2">&quot;profile&quot;</span><span class="tok-p">,</span><span class="tok-w"> </span><span class="tok-s2">&quot;launch&quot;</span><span class="tok-p">,</span><span class="tok-w"> </span><span class="tok-s2">&quot;launch/patient&quot;</span><span class="tok-p">,</span><span class="tok-w"> </span><span class="tok-s2">&quot;patient/*.rs&quot;</span><span class="tok-p">,</span><span class="tok-w"> </span><span class="tok-s2">&quot;user/*.rs&quot;</span><span class="tok-p">,</span><span class="tok-w"> </span><span class="tok-s2">&quot;offline_access&quot;</span><span class="tok-p">],</span>
<span class="tok-w">  </span><span class="tok-nt">&quot;response_types_supported&quot;</span><span class="tok-p">:</span><span class="tok-w"> </span><span class="tok-p">[</span><span class="tok-s2">&quot;code&quot;</span><span class="tok-p">],</span>
<span class="tok-w">  </span><span class="tok-nt">&quot;management_endpoint&quot;</span><span class="tok-p">:</span><span class="tok-w"> </span><span class="tok-s2">&quot;https://ehr.example.com/user/manage&quot;</span><span class="tok-p">,</span>
<span class="tok-w">  </span><span class="tok-nt">&quot;introspection_endpoint&quot;</span><span class="tok-p">:</span><span class="tok-w"> </span><span class="tok-s2">&quot;https://ehr.example.com/user/introspect&quot;</span><span class="tok-p">,</span>
<span class="tok-w">  </span><span class="tok-nt">&quot;revocation_endpoint&quot;</span><span class="tok-p">:</span><span class="tok-w"> </span><span class="tok-s2">&quot;https://ehr.example.com/user/revoke&quot;</span><span class="tok-p">,</span>
<span class="tok-w">  </span><span class="tok-nt">&quot;code_challenge_methods_supported&quot;</span><span class="tok-p">:</span><span class="tok-w"> </span><span class="tok-p">[</span><span class="tok-s2">&quot;S256&quot;</span><span class="tok-p">],</span>
<span class="tok-w">  </span><span class="tok-nt">&quot;capabilities&quot;</span><span class="tok-p">:</span><span class="tok-w"> </span><span class="tok-p">[</span>
<span class="tok-w">    </span><span class="tok-s2">&quot;launch-ehr&quot;</span><span class="tok-p">,</span>
<span class="tok-w">    </span><span class="tok-s2">&quot;permission-patient&quot;</span><span class="tok-p">,</span>
<span class="tok-w">    </span><span class="tok-s2">&quot;permission-v2&quot;</span><span class="tok-p">,</span>
<span class="tok-w">    </span><span class="tok-s2">&quot;client-public&quot;</span><span class="tok-p">,</span>
<span class="tok-w">    </span><span class="tok-s2">&quot;client-confidential-symmetric&quot;</span><span class="tok-p">,</span>
<span class="tok-w">    </span><span class="tok-s2">&quot;context-ehr-patient&quot;</span><span class="tok-p">,</span>
<span class="tok-w">    </span><span class="tok-s2">&quot;sso-openid-connect&quot;</span>
<span class="tok-w">    </span><span class="tok-s2">&quot;launch-openehr-ehr&quot;</span><span class="tok-p">,</span>
<span class="tok-w">    </span><span class="tok-s2">&quot;openehr-permission-v1&quot;</span>
<span class="tok-w">	  </span><span class="tok-s2">&quot;launch-base64-json&quot;</span>
<span class="tok-w">  </span><span class="tok-p">]</span>
<span class="tok-p">}</span></code></pre>
</div>
</div>
</div>
<div class="sect2">
<h3 id="_authentication_endpoints"><a class="anchor" href="#_authentication_endpoints"></a>4.2. Authentication endpoints</h3>
<div class="paragraph">
<p>The authorization_endpoint, token_endpoint, registration_endpoint, introspection_endpoint etc. should be exactly the same as in the OAuth2 + OIDC protocol’s .well-known/openid-configuration.</p>
</div>
</div>
<div class="sect2">
<h3 id="_services"><a class="anchor" href="#_services"></a>4.3. Services</h3>
<div class="paragraph">
<p>The "services" section allows the application to discover the APIs of all services that can be used along with a description and documentation. The following are identified as known services:
* openehr: The base URL of the openEHR REST API
* fhir: The base URL of the FHIR REST API
* dicomweb: The base URL of the DICOMWeb REST API</p>
</div>
<div class="paragraph">
<p>If the vendor may decide to add additional services to this list. The key of each service should then follow the inverse domain naming convention using a domain the vendor has control over.</p>
</div>
</div>
<div class="sect2">
<h3 id="_capabilities"><a class="anchor" href="#_capabilities"></a>4.4. Capabilities</h3>
<div class="paragraph">
<p>The capabilities section should include all relevant capabilities as per SMART on FHIR. Alongside, the following capabilities should indicate the ability to launch using openEHR artefacts:
* "launch-openehr-ehr" - support to select an EHR context within openEHR returned as the "ehr" parameter in a token.
* "launch-openehr-episode" - support to launch and select an Episode context returned as the "episode" parameter in a token.
* "openehr-permission-v1" - support for the scope and authorization scheme described below for openEHR REST APIs
* "launch-base64-json" - support for the "launch" URL parameter being a base64 encoded JSON of the context in case of EHR launch protocol.</p>
</div>
</div>
</div>
</div>
<div class="sect1">
<h2 id="_authentication_authorization_and_scopes"><a class="anchor" href="#_authentication_authorization_and_scopes"></a>5. Authentication, Authorization and Scopes</h2>
<div class="sectionbody">
<div class="admonitionblock note">
<table>
<tr>
<td class="icon">
<div class="title">Note</div>
</td>
<td class="content">
under development
</td>
</tr>
</table>
</div>
</div>
</div>
<div class="sect1">
<h2 id="_context_selection"><a class="anchor" href="#_context_selection"></a>6. Context Selection</h2>
<div class="sectionbody">
<div class="admonitionblock note">
<table>
<tr>
<td class="icon">
<div class="title">Note</div>
</td>
<td class="content">
under development
</td>
</tr>
</table>
</div>
</div>
</div>
<div class="sect1">
<h2 id="_launch_protocol"><a class="anchor" href="#_launch_protocol"></a>7. Launch Protocol</h2>
<div class="sectionbody">
<div class="admonitionblock note">
<table>
<tr>
<td class="icon">
<div class="title">Note</div>
</td>
<td class="content">
under development
</td>
</tr>
</table>
</div>
</div>
</div>
</div>
<div id="footer">
<div id="footer-text">
Last updated 2023-07-06 17:49:00 UTC
</div>
</div>
</body>
</html>